<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>陌上花开</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://ontheroad.nosace.cc/"/>
  <updated>2019-05-29T09:47:49.063Z</updated>
  <id>http://ontheroad.nosace.cc/</id>
  
  <author>
    <name>Matthew Wong</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ElasticSearch 同步数据</title>
    <link href="http://ontheroad.nosace.cc//org/2019-05-29-2019-05-29-es-reindex-api.html"/>
    <id>http://ontheroad.nosace.cc//org/2019-05-29-2019-05-29-es-reindex-api.html</id>
    <published>2019-05-28T16:00:00.000Z</published>
    <updated>2019-05-29T09:47:49.063Z</updated>
    
    <content type="html"><![CDATA[<div id="outline-container-org4f3b1ef" class="outline-2"><h2 id="org4f3b1ef">同步方法</h2><div class="outline-text-2" id="text-org4f3b1ef"><ol class="org-ol"><li>通过curl调用 <b>ElasticSearch</b> 的reindex API，优点是简单易用，缺点是同步性能不够快</li><li>通过JAVA API自己实现同步过程，可以实现单点50MBps的同步性能，备份数为1，基本耗光千兆网卡，且可多点同时同步多个不同索引</li></ol></div></div><div id="outline-container-orga54a556" class="outline-2"><h2 id="orga54a556">reindex 注意事项</h2><div class="outline-text-2" id="text-orga54a556"><ol class="org-ol"><li>需要源索引中文档开启_source字段</li><li>不会引用源索引的配置，如mapping，shard，replicas等，若有需要应该先创建并设置好目标索引后再调用</li><li>从其它集群reindex数据的话，需要配置reindex.remote.whitelist，如果开启SSL，还需要配置证书等</li></ol><p><a id="more"></a></p></div></div><div id="outline-container-org3cc5d9a" class="outline-2"><h2 id="org3cc5d9a">reindex 接口</h2><div class="outline-text-2" id="text-org3cc5d9a"><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">POST _reindex?slices=5&amp;refresh&amp;wait_for_completion=false</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"source"</span>: &#123;</span><br><span class="line">    <span class="attr">"remote"</span>: &#123;</span><br><span class="line">      <span class="attr">"host"</span>: <span class="string">"http://otherhost:9200"</span>,</span><br><span class="line">      <span class="attr">"username"</span>: <span class="string">"user"</span>,</span><br><span class="line">      <span class="attr">"password"</span>: <span class="string">"pass"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"index"</span>: <span class="string">"old_index_name"</span>,</span><br><span class="line">    <span class="attr">"size"</span>: <span class="string">"10000"</span>,</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">      <span class="attr">"term"</span>: &#123;</span><br><span class="line">        <span class="attr">"field_name"</span>: <span class="string">"field_value"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"dest"</span>: &#123;</span><br><span class="line">    <span class="attr">"index"</span>: <span class="string">"new_index_name"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"script"</span>: &#123;</span><br><span class="line">    <span class="attr">"source"</span>: <span class="string">"ctx._source.tag = ctx._source.remove(\"flag\")"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol class="org-ol"><li>source.slices 可选项，默认值为1，设置为源索引shards个数，并发检索，可以达到最高效率</li><li>source.wait_for_completion 可选项，默认为true，设置为false可以令reindex异步执行，大量数据的同步通常耗时较久</li><li>source.remote 可选项，默认为空，表示只在本地做reindex，主要用于字段重命名，修复异常数据等，配置此项可用于集群间同步数据</li><li>source.index 必须项，源索引名</li><li>source.size 可选项，默认值为1000，一次获取的文档个数，视集群情况调整</li><li>source.query 可选项，默认为空，即reindex源索引所有数据</li><li>dest.index 必须项，目标索引名</li><li>script.source 可选项，默认为空，主要用于数据修改，示例中将flag重命名为tag</li></ol></div></div><div id="outline-container-org8b53ac1" class="outline-2"><h2 id="org8b53ac1">任务进度</h2><div class="outline-text-2" id="text-org8b53ac1"></div><div id="outline-container-org51b912e" class="outline-3"><h3 id="org51b912e">进度查询</h3><div class="outline-text-3" id="text-org51b912e"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET _tasks?detailed=true&amp;actions=*reindex</span><br></pre></td></tr></table></figure></div></div><div id="outline-container-orgf46a918" class="outline-3"><h3 id="orgf46a918">取消任务</h3><div class="outline-text-3" id="text-orgf46a918"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST _tasks/task_id/_cancel</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org9d8a1c8" class="outline-2"><h2 id="org9d8a1c8">DIY同步过程</h2><div class="outline-text-2" id="text-org9d8a1c8"><ol class="org-ol"><li>备份数据</li><li>删除数据(如果同步的是整个索引的数据，只需要把索引从alias中移除即可完成备份与删除)</li><li>从远端拉取数据</li><li>按源索引的shards数并发设置SliceBuilder</li><li>SliceBuilder调用addSort(FieldSortBuilder.DOC_FIELD_NAME, SortOrder.ASC)有奇效</li><li>线程中通过scroll接口分页获取一批数据</li><li>获取的数据通过BulkProccessor异步写入本地集群，设置最新分页id，重复6</li><li>最终等待BulkProccessor返回</li></ol></div></div>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;outline-container-org4f3b1ef&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;org4f3b1ef&quot;&gt;同步方法&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-org4f3b1ef&quot;&gt;
&lt;ol class=&quot;org-ol&quot;&gt;
&lt;li&gt;通过curl调用 &lt;b&gt;ElasticSearch&lt;/b&gt; 的reindex API，优点是简单易用，缺点是同步性能不够快&lt;/li&gt;
&lt;li&gt;通过JAVA API自己实现同步过程，可以实现单点50MBps的同步性能，备份数为1，基本耗光千兆网卡，且可多点同时同步多个不同索引&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;outline-container-orga54a556&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;orga54a556&quot;&gt;reindex 注意事项&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-orga54a556&quot;&gt;
&lt;ol class=&quot;org-ol&quot;&gt;
&lt;li&gt;需要源索引中文档开启_source字段&lt;/li&gt;
&lt;li&gt;不会引用源索引的配置，如mapping，shard，replicas等，若有需要应该先创建并设置好目标索引后再调用&lt;/li&gt;
&lt;li&gt;从其它集群reindex数据的话，需要配置reindex.remote.whitelist，如果开启SSL，还需要配置证书等&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
    
    </summary>
    
      <category term="大数据" scheme="http://ontheroad.nosace.cc/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
      <category term="ElasticSearch" scheme="http://ontheroad.nosace.cc/tags/ElasticSearch/"/>
    
  </entry>
  
  <entry>
    <title>读书笔记-201902-03</title>
    <link href="http://ontheroad.nosace.cc//org/2019-04-02-2019-04-02-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-201902-03.html"/>
    <id>http://ontheroad.nosace.cc//org/2019-04-02-2019-04-02-读书笔记-201902-03.html</id>
    <published>2019-04-01T16:00:00.000Z</published>
    <updated>2019-04-02T14:15:32.000Z</updated>
    
    <content type="html"><![CDATA[<div id="outline-container-org1499849" class="outline-2"><h2 id="org1499849">正面管教</h2><div class="outline-text-2" id="text-org1499849"><p>不同于传统的严厉式或者溺爱式管教，书中提倡和善而坚定的鼓励式教育。鼓励并不像很多人相信的那样，是对不良行为的奖励，恰恰相反，鼓励会消除孩子对不良行为的需要。为人父母总是不自觉地替孩子做事，甚至做决定。当看到孩子费劲地爬向玩具时，我们总会不自觉地把玩具拿到孩子面前。但是那样会剥夺他们通过自己的体验来发展出对自己能力的信念的机会。时刻提醒自己，不要替孩子做任何他能做的事。</p><blockquote><p>书摘</p><ul class="org-ul"><li><b>正面管教倡导的是和善而坚定，并且把有价值的社会技能和人生技能教给孩子</b></li><li>和善能抵消过于坚定所造成的所有问题（反叛、抗拒、对自尊的挫伤），而坚定则能抵消过于和善所造成的所有问题（娇纵、操纵父母、被宠坏的小淘气鬼、对自尊的挫伤）</li><li><b>孩子们的察觉能力很强，但解释能力却很差</b></li><li><b>孩子的首要目的是追求归属感和价值感</b></li><li><b>不要替孩子做任何他能做的事，那样会剥夺他们通过自己的体验来发展出对自己能力的信念的机会</b></li><li><b>孩子的行为是以自己认为真实的东西为基础，而不是以事实为基础的</b></li><li>行为不当的孩子是丧失了信心的孩子，他们的不良行为是在让你知道，他们没有感受到归属感和价值感，而且他们对于如何找到归属感和价值感抱有错误的信念</li><li><b>鼓励并不像很多人相信的那样，是对不良行为的奖励。不是的，鼓励会消除孩子对不良行为的需要</b></li><li>只要大人通过反复提醒或者通过替孩子解决问题，而不是和孩子一起解决问题，将本应该由孩子来承担的责任揽过去，孩子就永远也学不会对自己的行为负责</li></ul></blockquote><p><a id="more"></a></p></div></div><div id="outline-container-org932e334" class="outline-2"><h2 id="org932e334">月亮与六便士(毛姆)</h2><div class="outline-text-2" id="text-org932e334"><p>这样的书名很难让人眼前一亮，就像人月神话，单从名字根本看不出是什么方面的书。虽说酒香不怕巷子深，但是一个耳熟能详的名字更容易吸引到人。大概，月亮指的是理想，六便士指的是现实，真不知道没看书内容怎么能看得懂书名。书中主人公为了理想放弃了现实生活中的一切，毅然决然，没有丝毫眷恋，像极了突然顿悟的高僧。看起来有些不尽人情，但并不是每个人都能拥有那样令自己打心底热血沸腾的目标的。大多数人，或为钱，或为权，终其一生，只为谋生，无法看透生活的本质。文明人践行一种奇怪的才智：他们把短暂的生命，浪费在烦琐的事务上。越文明越如此，这是我们这个时代莫大的悲哀。</p><ul class="org-ul"><li>一百多年前，奥斯卡·王尔德写下这样的话：“ <b>我不想谋生。我想生活</b> 。”这简直可以拿来概括《月亮与六便士》这部小说。</li><li>艺术是情感的体现，情之所至，人人都能理解。</li><li>为了使灵魂安宁，一个人每天至少该做两件他不喜欢的事。</li><li>作者应该从写作本身，从思想的宣泄中获得快乐；至于其他，都不必介意，一本书或成功或失败，或赞誉或诋毁，他都应该淡然一笑。</li><li>钟摆来回摆荡，旅程永远循环。</li><li><b>文明人践行一种奇怪的才智：他们把短暂的生命，浪费在烦琐的事务上</b></li><li>也许，这只是我自己的怪诞想法，这些天来一直在心头作祟，我总感觉，大多数人这样度过一生，好像不大对劲儿。</li><li>我承认这种生活的社会价值，我也看到它井然有序的幸福，但是，我的血液里有一种强烈的冲动，渴望一种桀骜不驯的旅程。这样的安逸总让我惊惧。我的心渴望更加惊险的生活。只要我能有所改变-改变和不可预知的冒险，我将踏上嶙峋怪石，哪怕激流险滩。</li><li>我那时还不懂得，人性有多矛盾；我不知道，真诚中有多少虚伪，高尚中有多少卑鄙，或者，邪恶中有多少善良。</li><li><b>感情自有其理，理性难以知晓</b></li><li>为什么你认为美-这世上最宝贵的东西，会像沙滩上的卵石，一个漫不经心的路人，随随便便就能捡到？ <b>美是美妙，是奇异，艺术家唯有通过灵魂的煎熬，才能从宇宙的混沌中创造出美。而当美出现，它并非为了让每个人都认出它自己。要认识它，你必须重复和艺术家一样的奇异之旅。这是一支他唱给你的旋律，要想再次用心聆听，就需要智慧、感觉以及丰富的想象力</b></li><li><b>天才是世上最奇妙的东西。但对天才自己而言，却是很大的负担。我们应该容忍他们，要很有耐心</b></li><li>爱需要有甘愿示弱的态度，保护他人的愿望，尽心竭力、取悦对方的渴望——总之，爱需要无私，或者至少将自私隐藏得了无痕迹；而且爱也需要矜持。</li><li><b>爱让一个人比原来的自己更丰富，同时又更贫乏</b></li><li><b>做自己最想做的事，过自己想过的生活，心平气和，怎么能叫作践自己？</b></li><li><b>一个人往往不是他想成为的那种人，而是他不得不成为的那种人</b></li></ul></div></div><div id="outline-container-orgd69b178" class="outline-2"><h2 id="orgd69b178">思想史：从火到弗洛伊德(彼得•沃森) 以及　中国通史(吕思勉)</h2><div class="outline-text-2" id="text-orgd69b178"><p>厚厚的两本书，都只看了大约20％。两本书分别从思想和文化方面阐述历史。诚然，历史是经济、思想、文化、军事等方面的有机组合。然而，单独从其中一方面论述历史未免有些枯燥。个人更喜欢大秦帝国基于具体历史事件介绍经济思想文化等内容的方式。这两本历史书大约更适合修读这个专业方向的人阅读。</p><ul class="org-ul"><li>首先是真理的王国，追求真理是宗教、科学和哲学所关心的问题。在真理的王国，在理想的情况下，人们意见的一致性是完全的、不由自主的，即在逻辑、数学和演绎意义上是必然的。其次是正确的王国，这是法律、伦理学和政治学关心的问题。在这个王国，意见的一致性多数时候是自愿达成的，人们不需要完全同意，但是为了行之有效仍需要广泛流布。最后是趣味的王国，主要与艺术有关。在这个王国，完全不必达成一致性，甚至不一致往往还饶有意味。</li><li>儒家试图在世间寻求自我完善，而道教总是逃避这个世界，目的是超越人类存在的（有限）条件，以达到不朽和永生</li><li>在东方，神和人的关系更加密切，东方的宗教一般比西方的宗教更倾向于神秘主义。而在西方，渴望成神成圣是亵渎行为。</li><li>第一，希腊人第一个真正理解到，世界是可以被认知的，知识可以通过系统观察而获得，无须借助神的帮助；世界和宇宙运行有自己的秩序，不是我们祖先所想的神话。第二，自然和人事不同，自然的运行根据不变之律，而人事没有这样的定律，而是一种强制或协议之律，可以采取各种形式，具有可变性。</li><li>历史虽是记事之书，我们之所探求，则为理而非事。理是概括众事的，事则只是一事。天下事既没有两件真正相同的，执应付此事的方法，以应付彼事，自然要失败。根据于包含众事之理，以应付事实，就不至于此了。然而理是因事而见的，舍事而求理，无有是处。所以我们求学，不能不顾事实，又不该死记事实。</li><li>人类控制自然的力量进步了，控制自己的力量，却不能与之并进。于是天灾虽澹，而人祸复兴。</li></ul></div></div><div id="outline-container-org65f0ee4" class="outline-2"><h2 id="org65f0ee4">黑天鹅(纳西姆•尼古拉斯•塔勒布)</h2><div class="outline-text-2" id="text-org65f0ee4"><p>又是厚厚的一本书，不过内容很有意思，大大颠覆了正常的认知。比如说，众所周知，进化是物竞天泽，适者生存，然而书中却认为进化不过是一系列侥幸的成功，因为存在幸存者偏见，存在沉默的证据。比如说，我们习惯应用归纳法，事实上反证法更容易接近事实，因为看过再多的白天鹅都不能归纳出天鹅都是白的这个结论，只要遇到一只黑天鹅就能完全否定这个结论。比如说，数学上的大数定律也许并不具有现实意义，尽管理论上很完美。我们都习惯于在现实中应用大数定律把随机事件正态分布化，然而我们都忽视了大数定律的重要前提，独立同分布，这个前提在现实生活中并不常见。类似的完美理论还有泰勒定理，现实中哪来的那么连续可导？事实上，学校知识的简化与反启蒙特性阻碍了人们对现实生活的理解。很有意思的一本书，耳目一新，值得再品。</p><ul class="org-ul"><li>首先，它具有意外性，即它在通常的预期之外，也就是在过去没有任何能够确定它发生的可能性的证据。其次，它会产生极端影响。再次，虽然它具有意外性，但人的本性促使我们在事后为它的发生编造理由，并且使它变得可解释和可预测。</li><li>黑天鹅的逻辑是，你不知道的事比你知道的事更有意义，因为许多黑天鹅事件正是在不可预知的情况下发生和加剧的。</li><li>所有人都知道预防比治疗更重要，但预防只得到很少的奖赏。</li><li>我们可以通过负面例子而不是正面证据接近真相</li><li>知识的核心问题（以及这一章的观点）不存在一种叫做证实性证据的东西。</li><li><b>在一个短暂的时期里经历全部痛苦胜过在很长的时间里分散这些痛苦</b></li><li><b>大量一般的好消息比一个非常好的消息更令人感到幸福</b></li><li><b>进化理论不考虑沉默的证据，进化是一系列侥幸的成功</b></li><li>我们活下来了，因为卡萨诺瓦式的温馨情境出现了，如果这看上去太难以理解，那是因为我们被因果观念洗脑了，而且我们以为说“因为”比接受随机性看上去更聪明。</li><li>请非常谨慎地使用“所以”，努力只在由实验而非事后分析得出结论时才使用这个词。</li><li><b>学校知识的简化与反启蒙特性阻碍了人们对现实生活的理解</b></li><li>我们为已经发生的事担忧，而不是为那些可能发生却实际上没有发生的事。</li><li>在预测未来的过程中，你所模型化的过程需要越来越精确，因为你的错误率会迅速上升。而仅仅达到近似的精确是不行的，因为你的预测会突然失效，最终需要对过去进行无穷精确的解释。</li><li><b>随机性最终只是反知识。世界隐藏在迷雾中，而表象在愚弄我们</b></li><li><b>做决策时，你只需要了解事件的影响（这是你能知道的），不需要了解事件的可能性（这是你不可能知道的），这一思想就是不确定性的核心思想</b></li><li>最终推动我们的是历史，而我们却一直以为我们自己才是推动力。</li><li>这是不具突破性的随机性分析框架的关键特征：出现极端离差的可能性以加速度下降。</li><li><b>减轻现实生活中黑天鹅影响的方法</b><ul class="org-ul"><li>尊重时间和非说明性知识。</li><li>避免优化， 学会喜欢冗余 。历久而存的事情更为可取——它们更容易达到遍历状态。但无论如何，我们都难以知晓它们能坚持到何时。</li><li>避免低可能性盈利的预测，尽管对一般盈利没有必要。</li><li>小心远期事件的“非典型性”。</li><li>避免风险尺度。</li><li>注意红利发放的道德风险。</li><li>正面还是负面的黑天鹅？</li><li>不要将挥发性缺失与风险缺失混为一谈。</li><li>小心风险数字的表现。</li></ul></li><li>黑天鹅强势社会中的十项原则<ul class="org-ul"><li>脆弱的事物在其初始阶段便会失败。</li><li>不存在损失的社会化和收获的私人化。</li><li>蒙面驾驶校车（并将其撞坏）的人不应当再被给予开校车的机会。</li><li>不要让一个从事“激励”红利的人掌管一座核电站或者掌握你的金融风险。</li><li>用简洁性弥补复杂性。</li><li>不要将炸药给孩子玩，即便炸药上带有警告标志。</li><li>只有庞氏骗局才能够依靠信心，政府从来不需要“重拾信心”。</li><li>在吸毒上瘾者戒毒痛苦万分时，千万不要给他更多的毒品。</li><li>市民不应将金融资产看做一种保值手段而对其大加依赖，也不应当依赖于那些漏洞百出的专家们的“建议”。</li><li>用打碎的鸡蛋做蛋卷。</li></ul></li><li>所有可能被剥夺的东西都不值得他留恋。</li><li>世界是由极端、未知和非常不可能发生的事物主导的，那就意味着，我们习以为常的作出决定的方式，其实是对生命的很大浪费</li></ul></div></div>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;outline-container-org1499849&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;org1499849&quot;&gt;正面管教&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-org1499849&quot;&gt;
&lt;p&gt;
不同于传统的严厉式或者溺爱式管教，书中提倡和善而坚定的鼓励式教育。
鼓励并不像很多人相信的那样，是对不良行为的奖励，恰恰相反，鼓励会消除孩子对不良行为的需要。
为人父母总是不自觉地替孩子做事，甚至做决定。
当看到孩子费劲地爬向玩具时，我们总会不自觉地把玩具拿到孩子面前。
但是那样会剥夺他们通过自己的体验来发展出对自己能力的信念的机会。
时刻提醒自己，不要替孩子做任何他能做的事。
&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;
书摘
&lt;/p&gt;
&lt;ul class=&quot;org-ul&quot;&gt;
&lt;li&gt;&lt;b&gt;正面管教倡导的是和善而坚定，并且把有价值的社会技能和人生技能教给孩子&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;和善能抵消过于坚定所造成的所有问题（反叛、抗拒、对自尊的挫伤），而坚定则能抵消过于和善所造成的所有问题（娇纵、操纵父母、被宠坏的小淘气鬼、对自尊的挫伤）&lt;/li&gt;
&lt;li&gt;&lt;b&gt;孩子们的察觉能力很强，但解释能力却很差&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;孩子的首要目的是追求归属感和价值感&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;不要替孩子做任何他能做的事，那样会剥夺他们通过自己的体验来发展出对自己能力的信念的机会&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;孩子的行为是以自己认为真实的东西为基础，而不是以事实为基础的&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;行为不当的孩子是丧失了信心的孩子，他们的不良行为是在让你知道，他们没有感受到归属感和价值感，而且他们对于如何找到归属感和价值感抱有错误的信念&lt;/li&gt;
&lt;li&gt;&lt;b&gt;鼓励并不像很多人相信的那样，是对不良行为的奖励。不是的，鼓励会消除孩子对不良行为的需要&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;只要大人通过反复提醒或者通过替孩子解决问题，而不是和孩子一起解决问题，将本应该由孩子来承担的责任揽过去，孩子就永远也学不会对自己的行为负责&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;
    
    </summary>
    
      <category term="笔记" scheme="http://ontheroad.nosace.cc/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="教育" scheme="http://ontheroad.nosace.cc/tags/%E6%95%99%E8%82%B2/"/>
    
      <category term="小说" scheme="http://ontheroad.nosace.cc/tags/%E5%B0%8F%E8%AF%B4/"/>
    
      <category term="思想" scheme="http://ontheroad.nosace.cc/tags/%E6%80%9D%E6%83%B3/"/>
    
  </entry>
  
  <entry>
    <title>ELK踩坑记</title>
    <link href="http://ontheroad.nosace.cc//org/2019-02-03-2019-02-02-elk%E8%B8%A9%E5%9D%91%E8%AE%B0.html"/>
    <id>http://ontheroad.nosace.cc//org/2019-02-03-2019-02-02-elk踩坑记.html</id>
    <published>2019-02-02T16:00:00.000Z</published>
    <updated>2019-02-13T06:05:48.418Z</updated>
    
    <content type="html"><![CDATA[<div id="outline-container-org5194364" class="outline-2"><h2 id="org5194364">前言</h2><div class="outline-text-2" id="text-org5194364"><p>最近关于ELK(<b>ElasticSearch</b> <b>Kibana</b> <b>Logstash</b>)的需求比较多，需求最能推动研发。随着需求的增加，踩了不少坑，统一在此记录一下，免得之后没用又忘。目前实现每台每天大约25亿行WEB日志单备份写入，关闭SSL大约可再提高30%至50%。但是启用x-pack后，默认不允许关闭SSL。暂时没找到只在外部写入时使用SSL，内部节点通信关闭SSL的方法。</p></div></div><div id="outline-container-org8fe5ee6" class="outline-2"><h2 id="org8fe5ee6">BulkRequestBuilder VS BulkProcessor</h2><div class="outline-text-2" id="text-org8fe5ee6"><p>对于大部分应用场景，BulkProcessor足够好用，纯异步处理机制，也是ES官方推荐的批量索引方式。然而BulkProcessor有个小问题，写入失败时只能在子线程中处理，无法抛出异常给主线程。正如官方开发人员javanna在<a href="https://github.com/elastic/elasticsearch/issues/3761" target="_blank" rel="noopener">Throwing exception from BulkProcessor.Listener.afterBulk results in closing down transport</a>中所说，当失败发生时，收集失败信息、了解失败原因以及最终重发数据比起简单的抛出异常更有意义。然而做为数据接收方，不能及时反馈异常信息给数据推送方，会导致数据推送方误以为一切如故而依然维持高速推送，进而导致累积大量写入失败的数据。为了更好地回退异常写入的数据以及减缓异常时原始数据生成速率，我们采用BulkRequestBuilder替代了BulkProcess。</p></div></div><div id="outline-container-org209c6e5" class="outline-2"><h2 id="org209c6e5">BulkProcessor flush后马上refresh还是读不到刚写入的数据</h2><div class="outline-text-2" id="text-org209c6e5"><p>因为BulkProcessor的flush也是异步执行，返回不等于已经执行完毕，此时执行refresh不会生效。解决这个问题要么创建BulkProcessor时setFlushInterval为较小值，要么关闭句柄时用awaitClose方法代替flush+close。一般BulkProcessor用于批量导入数据，FlushInterval设为太小会影响导入性能，更多时候是不设置这个值的。awaitClose相对比较实用，既可保证数据完全写入立即返回，又可设置最大容忍超时时间，防止集群故障连接挂住。</p></div></div><div id="outline-container-org73a9ac0" class="outline-2"><h2 id="org73a9ac0">BulkRequestBuilder 索引生成性能下降</h2><div class="outline-text-2" id="text-org73a9ac0"><p>在引用BulkRequestBuilder不久之后，一次数据突增后的写入不断变慢暴露了我们的使用方式有问题。由于数据量巨大，这批数据被我们分成多次，每次万行写入，想当然地想要减少创建BulkRequetBuilder的开销。于是在每次写入都复用BulkRequestBuilder句柄，然而事与愿违，复用的结果是每次写入后索引生成速率就明显变慢。百思不得其解，无独有偶，在stackoverflow发现有人也有同样的困扰，详见<a href="https://stackoverflow.com/questions/22950788/elasticsearch-indexing-by-bulkrequestbuilder-getting-slow-down" target="_blank" rel="noopener">Elasticsearch Indexing by BulkRequestBuilder getting slow down</a>。根据最佳回答，每次写入改为重新获取BulkRequestBuilder句柄，索引生成性能下降问题不再出现。原因不明，暂时没有时间看源代码。 </p><p><a id="more"></a></p></div></div><div id="outline-container-orge93df25" class="outline-2"><h2 id="orge93df25">获取Alias包含的所有Index名</h2><div class="outline-text-2" id="text-orge93df25"><p>在stackoverflow中<a href="https://stackoverflow.com/questions/25349947/how-to-find-index-by-alias-in-elasticsearch-java-api" target="_blank" rel="noopener">How to find Index by Alias in Elasticsearch java api?</a>提到的如下获取方式，获得的其实是集群所有Index的名字。也许是早期ES版本的实现方式，没有老版本环境做测试，暂不清楚，但是在6.0+版本中该方式行不通。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// INVALID in 6.0+</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Set&lt;String&gt; <span class="title">getIndicesFromAliasName</span><span class="params">(String aliasName)</span> </span>&#123;</span><br><span class="line">    IndicesAdminClient iac = client.admin().indices();</span><br><span class="line">    ImmutableOpenMap&lt;String, List&lt;AliasMetaData&gt;&gt; map = iac.getAliases(<span class="keyword">new</span> GetAliasesRequest(aliasName))</span><br><span class="line">            .actionGet().getAliases();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> Set&lt;String&gt; allIndices = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    map.keysIt().forEachRemaining(allIndices::add);</span><br><span class="line">    <span class="keyword">return</span> allIndices;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>6.0+版本的获取方式如下所示，map中的value有数据才是真正被Alias过的Index。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Set&lt;String&gt; <span class="title">getIndicesFromAliasName</span><span class="params">(String aliasName)</span> </span>&#123;</span><br><span class="line">    ImmutableOpenMap&lt;String, List&lt;AliasMetaData&gt;&gt; map = admin().indices().getAliases(</span><br><span class="line">            <span class="keyword">new</span> GetAliasesRequest(aliasName)).actionGet().getAliases();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> Set&lt;String&gt; indices = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    map.keysIt().forEachRemaining((String key) -&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (map.get(key).size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            indices.add(key);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> indices;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div id="outline-container-orgaa38fd7" class="outline-2"><h2 id="orgaa38fd7">Transport Client VS REST Client</h2><div class="outline-text-2" id="text-orgaa38fd7"><p>虽然 <b>ES</b> 计划在未来的版本中用REST Client完全取代Transport Client，但是在6.0版本中测试，REST依然有10%的性能差距，且部分功能尚未实现。</p></div></div><div id="outline-container-org0355a6e" class="outline-2"><h2 id="org0355a6e">Text VS Keyword</h2><div class="outline-text-2" id="text-org0355a6e"><p>从某个版本开始， <b>ES</b> 的字符串变成了两种类型，text和keyword，text类型主要用于全文检索，keyword类型主要用于聚合。如果两种需求都需要，或者需求不确定，可以按如下方式设置template。索引时会自动保存text类型的field_name以及keyword类型的field_name.keyword。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&quot;field_name&quot;: &#123;</span><br><span class="line">    &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">    &quot;fields&quot;: &#123;</span><br><span class="line">        &quot;keyword&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">            &quot;ignore_above&quot;: 256</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div id="outline-container-orgfb88bfd" class="outline-2"><h2 id="orgfb88bfd"><b>Kibana</b> 精确匹配减号</h2><div class="outline-text-2" id="text-orgfb88bfd"><p>需要查询某个字段刚好等于减号，由于减号是保留字段，根据官网文档通过反斜线进行转义，依然无法查到所需。多次测试后发现只有keyword类型才能查询得到，text类型不能，原因未知。<b>Kibana</b> 经常出现类似Courier Fetch: 200 of 210 shards failed的错误信息，其实并不一定是 <b>ES</b> 存储出现了问题， <b>Kibana</b> 查询语法有问题时也会出现这个错误。</p></div></div><div id="outline-container-org3c0dfe5" class="outline-2"><h2 id="org3c0dfe5"><b>Kibana</b> 查询句子中多个单词</h2><div class="outline-text-2" id="text-org3c0dfe5"><p>因为 <b>Kibana</b> 支持通配符查询，想当然地查询field_name:first_word*second_word。虽然通过 <b>ES</b> 的查询接口没问题，但在 <b>Kibana</b> 并不能查到目标数据。正确的查询方式是 <b>field_name:(+first_word +second_word)</b> 或者 <b>field_name:(first_word AND second_word)</b>需要注意的是first_word与second_word必须完整存在于句中，多一个字符或少一个字符都不行。例如查询的是error，不会匹配到errors。如果需要既匹配error又匹配errors，应使用模糊查询语法 <b>error~</b></p></div></div>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;outline-container-org5194364&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;org5194364&quot;&gt;前言&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-org5194364&quot;&gt;
&lt;p&gt;
最近关于ELK(&lt;b&gt;ElasticSearch&lt;/b&gt; &lt;b&gt;Kibana&lt;/b&gt; &lt;b&gt;Logstash&lt;/b&gt;)的需求比较多，需求最能推动研发。
随着需求的增加，踩了不少坑，统一在此记录一下，免得之后没用又忘。
目前实现每台每天大约25亿行WEB日志单备份写入，关闭SSL大约可再提高30%至50%。
但是启用x-pack后，默认不允许关闭SSL。暂时没找到只在外部写入时使用SSL，内部节点通信关闭SSL的方法。
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;outline-container-org8fe5ee6&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;org8fe5ee6&quot;&gt;BulkRequestBuilder VS BulkProcessor&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-org8fe5ee6&quot;&gt;
&lt;p&gt;
对于大部分应用场景，BulkProcessor足够好用，纯异步处理机制，也是ES官方推荐的批量索引方式。
然而BulkProcessor有个小问题，写入失败时只能在子线程中处理，无法抛出异常给主线程。
正如官方开发人员javanna在&lt;a href=&quot;https://github.com/elastic/elasticsearch/issues/3761&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Throwing exception from BulkProcessor.Listener.afterBulk results in closing down transport&lt;/a&gt;中所说，
当失败发生时，收集失败信息、了解失败原因以及最终重发数据比起简单的抛出异常更有意义。
然而做为数据接收方，不能及时反馈异常信息给数据推送方，
会导致数据推送方误以为一切如故而依然维持高速推送，进而导致累积大量写入失败的数据。
为了更好地回退异常写入的数据以及减缓异常时原始数据生成速率，我们采用BulkRequestBuilder替代了BulkProcess。
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;outline-container-org209c6e5&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;org209c6e5&quot;&gt;BulkProcessor flush后马上refresh还是读不到刚写入的数据&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-org209c6e5&quot;&gt;
&lt;p&gt;
因为BulkProcessor的flush也是异步执行，返回不等于已经执行完毕，此时执行refresh不会生效。
解决这个问题要么创建BulkProcessor时setFlushInterval为较小值，要么关闭句柄时用awaitClose方法代替flush+close。
一般BulkProcessor用于批量导入数据，FlushInterval设为太小会影响导入性能，更多时候是不设置这个值的。
awaitClose相对比较实用，既可保证数据完全写入立即返回，又可设置最大容忍超时时间，防止集群故障连接挂住。
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;outline-container-org73a9ac0&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;org73a9ac0&quot;&gt;BulkRequestBuilder 索引生成性能下降&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-org73a9ac0&quot;&gt;
&lt;p&gt;
在引用BulkRequestBuilder不久之后，一次数据突增后的写入不断变慢暴露了我们的使用方式有问题。
由于数据量巨大，这批数据被我们分成多次，每次万行写入，想当然地想要减少创建BulkRequetBuilder的开销。
于是在每次写入都复用BulkRequestBuilder句柄，然而事与愿违，复用的结果是每次写入后索引生成速率就明显变慢。
百思不得其解，无独有偶，在stackoverflow发现有人也有同样的困扰，详见&lt;a href=&quot;https://stackoverflow.com/questions/22950788/elasticsearch-indexing-by-bulkrequestbuilder-getting-slow-down&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Elasticsearch Indexing by BulkRequestBuilder getting slow down&lt;/a&gt;。
根据最佳回答，每次写入改为重新获取BulkRequestBuilder句柄，索引生成性能下降问题不再出现。
原因不明，暂时没有时间看源代码。 
&lt;/p&gt;

&lt;p&gt;
    
    </summary>
    
      <category term="大数据" scheme="http://ontheroad.nosace.cc/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
      <category term="ElasticSearch" scheme="http://ontheroad.nosace.cc/tags/ElasticSearch/"/>
    
      <category term="Logstash" scheme="http://ontheroad.nosace.cc/tags/Logstash/"/>
    
      <category term="Kibana" scheme="http://ontheroad.nosace.cc/tags/Kibana/"/>
    
  </entry>
  
  <entry>
    <title>读书笔记-201901</title>
    <link href="http://ontheroad.nosace.cc//org/2019-02-01-2019-02-01-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-201901.html"/>
    <id>http://ontheroad.nosace.cc//org/2019-02-01-2019-02-01-读书笔记-201901.html</id>
    <published>2019-01-31T16:00:00.000Z</published>
    <updated>2019-02-01T07:56:44.302Z</updated>
    
    <content type="html"><![CDATA[<div id="outline-container-orgc0c051a" class="outline-2"><h2 id="orgc0c051a">杀死一只知更鸟 (哈珀·李)</h2><div class="outline-text-2" id="text-orgc0c051a"><p>书中从小女孩斯库特的视角透视出三十年代美国南方小镇保守压抑的日常生活。每个小孩都会经历成长所带来的烦恼，出生在充满偏见的保守小镇更甚。幸运的是，她有一位坚定勇敢、富有正义感和同情心的父亲阿迪克斯。他知行合一，言传身教，以实际行动告知孩子什么是尊重，什么是勇敢，什么是正义。要做到这一点太不容易，特别是在那么热爱评头论足的小镇。在黑人受到严重歧视的年代，阿迪克斯对保姆卡玻妮如家人，竭尽全力替汤姆辩护，无不诠释着人人生而平等。对于同班同学的奇怪用餐习惯，偏执的杜博斯太太，从不出门的怪人拉德利，阿迪克斯都耐心地教导孩子学会换位思考。“除非你穿上一个人的鞋子，像他那样走来走去，否则你永远无法真正了解一个人。”穷养富养，不如涵养教养。故事的结尾，律师和法官为了照顾为救小女孩而防卫杀人的拉德利的感受，心照不宣地选择性失明。这是难以判定的选择。假如这是不对的，但是把拉德利拉到聚光灯下无异于杀死一只知更鸟，为了正义杀死另一个人明显有问题。假如这是对的，但是又妨碍了法律公正的精神，良知的默契可能妨碍司法公正。这比苏格拉底明知自己没错还坚持接受判决的纯粹法治精神复杂得多，人可以牺牲自我成就真正的法治精神，但是真的可以牺牲无辜吗？</p><blockquote><p>书摘</p><ul class="org-ul"><li><b>勇敢就是，在你还没开始的时候就知道自己注定会输，但依然义无反顾地去做，并且不管发生什么都坚持到底</b></li><li><b>与人交谈的礼貌做法是谈论对方感兴趣的事情，而不是大谈特谈自己的兴趣点</b></li><li>“有些人吃饭习惯跟我们不一样，”卡玻妮压低声音恶狠狠地说，“可是你不能因为这个在饭桌上给人家当面提出来。那个男孩是你们家的客人，就算他要吃桌布，你也随他的便。你听见了吗？”</li><li>你永远也不可能真正了解一个人，除非你站在他的角度考虑问题</li><li>世界上就是有那么一类人，他们只顾担心来世，根本不去学习在今生如何做人</li><li>总不能因为过去这一百年我们一败涂地，就放弃争取胜利吧</li><li>你们射多少冠蓝鸦都没关系，只要你们能打得着，但要记住一点，杀死一只知更鸟便是犯罪，知更鸟只是哼唱美妙的音乐供人们欣赏，什么坏事也不做。它们不吃人家院子里种的花果蔬菜，也不在谷仓里筑巢做窝，只是为我们尽情地唱歌。所以说杀死一只知更鸟是犯罪</li><li><b>有一种东西不能遵循从众原则，那就是人的良心</b></li><li><b>如果别人把那当成一个侮辱性的字眼来骂你，并不能贬损你的人格。那只能让你看到，骂你的人有多可悲，他的谩骂并不能伤害到你</b></li><li><b>一个人没必要把自己懂的东西都展现出来 。</b> 人们不喜欢他们身边有什么人比他们懂得多。这会让他们气不打一处来。你使用的语言再标准，也改变不了他们。除非他们自己想学，否则一点儿办法也没有。你要么闭上嘴巴，要么跟他们说一样的话。</li><li><b>你永远也不可能真正了解一个人，除非你穿上他的鞋子走来走去，站在他的角度考虑问题</b></li></ul></blockquote><p><a id="more"></a></p></div></div><div id="outline-container-org99fafa1" class="outline-2"><h2 id="org99fafa1">守望之心 (哈珀·李)</h2><div class="outline-text-2" id="text-org99fafa1"><p>杀死一只知更鸟的续集，小女孩长大了。笔触依旧细腻，然而故事性大打折扣。原本塑造丰满的旧人物单薄许多，可圈可点的新人物又没有出现。要不是哈珀李的名字，大概不会看到最后。也有可能是个人经历不够深或者对美国历史了解不多，看不懂背后的深意。</p><blockquote><p>书摘</p><ul class="org-ul"><li>每个人的守望者，是他的良心。不存在集体良心这样的东西</li><li>偏见是一个贬义词，信念是一个褒义词，这两者之间具有某些共性，它们的起始都是理性的终结</li><li>回首看看以前、昨天、十年前的我们是什么样，从来都不难，难的是看清现在的我们</li></ul></blockquote></div></div><div id="outline-container-org84d1687" class="outline-2"><h2 id="org84d1687">自控力 (凯利·麦格尼格尔(Kelly McGonigal))</h2><div class="outline-text-2" id="text-org84d1687"><p>本书介绍关于自控力的生理基础、心理陷阱以及社会关系影响。进化使人拥有更多的前额皮质，这也是相对于其它动物，人会未雨绸缪的根本原因。前额皮质的三个区域分管“我要做”“我不要”“我想要”三种力量，这构成了自控力的生理基础。自控锻炼如同肌肉锻炼，冥想与呼吸则是哑铃杠杆。由于存在三种力量，锻炼自控力充满了矛盾和悖论。</p><ul class="org-ul"><li>我想要</li></ul><p>自控的目标不应仅仅是为了成为一个足够好的人，不然可能产生诡异的道德许可效应（当人做了善事后会很容易因自我感觉良好而允许自己做坏事）。这是因为当人自控的唯一动力是成为一个足够好的人，那么当人自我感觉良好的时候，人就会放弃自控。</p><ul class="org-ul"><li>我要做</li></ul><p>自控本身是逆人性的，如果我们控制思想和行为失败了，会认为是自己压抑得不够，而不会认为压抑思想的方法根本行不通，这反而会使我们更强烈地想要压抑自己。原谅自己的一时放纵，不要过于苛刻。自我原谅者比自我苛责者更容易自控。</p><ul class="org-ul"><li>我不要</li></ul><p>当人试着不去想某件事时，反而会比没有控制自己的思维时想得更多，比自己有意去想的时候还要多。比如失眠患者越是想入睡，会发现自己越清醒，心理学上称之为“讽刺性反弹”。试图去压抑想法是行不通的，放弃控制内心感受，反而能让我们更好地控制外在行为。接受自己的想法和感受，但同时也要记住，不要顺着自己的想法去做。即使不试着控制自己的思维，也要控制自己的行为。</p><p>自控力还受到社会认同的影响，这使得意志力和诱惑都具有传染性，加入有共同目标的群体有助于自控。</p><p>与自控力相对应的是人原始的冲动本能，在茹毛饮血的时代，本能使得人类得以延续，如今却阻碍了文明人的发展。有意思的是虽然人容易被冲动本能所累，但是彻底失去本能也未必是好事。没有了欲望，人会变得沮丧，没有了恐惧，人没法保护自己。关键在于学会利用原始本能，而不是反抗本能。</p><blockquote><p>书摘</p><ul class="org-ul"><li>能够自由选择的人往往选择了与自己长期利益不符的东西。</li><li>奖励的承诺并不能保证快乐，但没有奖励的承诺却肯定会带来不快乐。有了奖励的承诺，我们就会屈服于诱惑。没有奖励的承诺，我们则会失去动力。</li><li>我们可能会想，罪恶感会促使我们改正错误，但其实这正是“情绪低落让我们屈服于诱惑”的另一个表现方式。</li><li>在个人挫折面前，持自我同情态度的人比持自我批评的态度的人更愿意承担责任。</li><li>自控受到社会认同的影响，这使得意志力和诱惑都具有传染性。</li><li>当人们试着不去想某件事时，反而会比没有控制自己的思维时想得更多，比自己有意去想的时候还要多</li><li>放弃控制内心感受，反而能让我们更好地控制外在行为</li><li>如果想让自己远离精神痛苦，人们就需要与这些想法和平相处，而不是把它们推到一边。</li><li>无论是拖延症患者想摆脱焦虑，还是酗酒者想避免孤独，摆脱不好的感觉往往会导致自我毁灭的行为。</li><li>如果我们控制思想和行为失败了，我们会认为是自己压抑得不够，而不会认为压抑思想的方法根本行不通。这反而会使我们更强烈地想要压抑自己，即使撞上更硬的南墙也不回头。</li><li>接受自己的想法和感受，但同时也要记住，不要顺着自己的想法去做。即使不试着控制自己的思维，也要控制自己的行为。</li><li>退一步考虑，意识到这种想法和感觉并不受你控制，但你可以选择是否将这些想法付诸实践。</li><li><b>对内接受自我，对外控制行动</b></li></ul></blockquote></div></div><div id="outline-container-org7f41d02" class="outline-2"><h2 id="org7f41d02">影响力 (罗伯特·B.西奥迪尼(Robert B. Cialdini))</h2><div class="outline-text-2" id="text-org7f41d02"><p>本书论述了互惠、承诺和一致、社会认同、喜好、权威、稀缺这七个对人的行为影响重大的因素如何对人产生作用，以及如何避免受居心不良者利用这些因素实施的影响。社会飞速发展，人越来越自顾不瑕，为了适应这种快节奏的社会生活，人的社会行为越来越趋向于条件反射。这是适者生存法则下的自然结果，本能反应本身是好的，帮我们省下很多事，对自己对社会都是有益处的。就像过马路的时候人如果还需要停下来思考怎么过，大概会像小动物们手足无措吧。一般我们不需要对于自己的本能反应过分思考，正所谓，人类一思考，上帝就发笑。然而凡事皆有两面，不怀好意的人可能会利用我们的这种本能反应获取额外的利益，我想这是本书的主要作用，帮助我们鉴别外在影响力的善恶以及如何减轻恶意的影响，而不是要我们滥用这些方法。</p><blockquote><p>书摘</p><ul class="org-ul"><li>我们在要别人帮忙的时候，要是能给一个理由，成功的概率会更大。</li><li><b>文明的进步，就是人们在不假思索中可以做的事情越来越多</b></li><li>在接受琐碎请求时务必小心谨慎，因为一旦同意了，它就有可能影响我们的自我认知。它不仅能提高我们对分量更大的类似请求的顺从度，还能使我们更乐意去做一些跟先前答应的小要求毫不相关的事情</li><li>个人承诺是预防客户撕毁合同的一种重要心理机制</li><li>每当一个人当众选择了一种立场，他便会产生维持它的动机，因为这样才能显得前后一致</li><li>费尽周折才得到某样东西的人，比轻轻松松就得到的人，对这件东西往往更为珍视。</li><li>只有当我们认为外界不存在强大的压力时，我们才会为自己的行为发自内心地负起责任。</li><li>对于我们希望孩子真心相信的事情，绝不能靠贿赂或威胁让他们去做，贿赂和威胁的压力只会让孩子暂时顺从我们的愿望。</li><li>要点是找出一个理由，能让孩子从一开始就照着家长的意愿去做，同时又让他对这一行为自觉自愿地负责。也就是说，这种理由里蕴含的可察外部压力越小，效果就越好。对家长而言，选择一个合适的理由并不容易，但这番努力应该是物有所值的。它决定了孩子是短期内顺从，还是做出了长久的承诺。</li><li>多些信息总比少些好，这应该是一条基本的指导原则。</li><li>在判断何为正确时，我们会根据别人的意见行事</li><li>示范影片在改变儿童行为上的强大影响力，也可以用来治疗其他多种病症。</li><li>现场有大量其他旁观者在场时，旁观者对紧急情况伸出援手的可能性最低，</li><li>一般而言，在需要紧急救助的时候，你的最佳策略就是减少不确定性，让周围人注意到你的状况，搞清楚自己的责任</li><li>人们在不确定时，更容易根据他人的行为来判断自己该怎么做。</li><li>利用社会证据的人总能成功地操纵观众，哪怕这些证据是赤裸裸地伪造出来的。</li><li>不去压抑好感因素产生的影响力，听凭这些因素发挥力量，然后用这股力量反过来对付那些想从中获利的人</li><li>权威的压力能够全然控制我们的行为</li><li><b>管教前后不一的父母，最容易教出反叛心强的孩子</b></li><li>尽管只靠孤立数据容易做出愚蠢的决定，可现代生活的节奏又要求我们频繁使用这一捷径</li></ul></blockquote></div></div>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;outline-container-orgc0c051a&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;orgc0c051a&quot;&gt;杀死一只知更鸟 (哈珀·李)&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-orgc0c051a&quot;&gt;
&lt;p&gt;
书中从小女孩斯库特的视角透视出三十年代美国南方小镇保守压抑的日常生活。
每个小孩都会经历成长所带来的烦恼，出生在充满偏见的保守小镇更甚。
幸运的是，她有一位坚定勇敢、富有正义感和同情心的父亲阿迪克斯。
他知行合一，言传身教，以实际行动告知孩子什么是尊重，什么是勇敢，什么是正义。
要做到这一点太不容易，特别是在那么热爱评头论足的小镇。
在黑人受到严重歧视的年代，阿迪克斯对保姆卡玻妮如家人，
竭尽全力替汤姆辩护，无不诠释着人人生而平等。
对于同班同学的奇怪用餐习惯，偏执的杜博斯太太，从不出门的怪人拉德利，
阿迪克斯都耐心地教导孩子学会换位思考。
“除非你穿上一个人的鞋子，像他那样走来走去，否则你永远无法真正了解一个人。”
穷养富养，不如涵养教养。
故事的结尾，律师和法官为了照顾为救小女孩而防卫杀人的拉德利的感受，心照不宣地选择性失明。
这是难以判定的选择。
假如这是不对的，但是把拉德利拉到聚光灯下无异于杀死一只知更鸟，为了正义杀死另一个人明显有问题。
假如这是对的，但是又妨碍了法律公正的精神，良知的默契可能妨碍司法公正。
这比苏格拉底明知自己没错还坚持接受判决的纯粹法治精神复杂得多，
人可以牺牲自我成就真正的法治精神，但是真的可以牺牲无辜吗？
&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;
书摘
&lt;/p&gt;
&lt;ul class=&quot;org-ul&quot;&gt;
&lt;li&gt;&lt;b&gt;勇敢就是，在你还没开始的时候就知道自己注定会输，但依然义无反顾地去做，并且不管发生什么都坚持到底&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;与人交谈的礼貌做法是谈论对方感兴趣的事情，而不是大谈特谈自己的兴趣点&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;“有些人吃饭习惯跟我们不一样，”卡玻妮压低声音恶狠狠地说，“可是你不能因为这个在饭桌上给人家当面提出来。那个男孩是你们家的客人，就算他要吃桌布，你也随他的便。你听见了吗？”&lt;/li&gt;
&lt;li&gt;你永远也不可能真正了解一个人，除非你站在他的角度考虑问题&lt;/li&gt;
&lt;li&gt;世界上就是有那么一类人，他们只顾担心来世，根本不去学习在今生如何做人&lt;/li&gt;
&lt;li&gt;总不能因为过去这一百年我们一败涂地，就放弃争取胜利吧&lt;/li&gt;
&lt;li&gt;你们射多少冠蓝鸦都没关系，只要你们能打得着，但要记住一点，杀死一只知更鸟便是犯罪，知更鸟只是哼唱美妙的音乐供人们欣赏，什么坏事也不做。它们不吃人家院子里种的花果蔬菜，也不在谷仓里筑巢做窝，只是为我们尽情地唱歌。所以说杀死一只知更鸟是犯罪&lt;/li&gt;
&lt;li&gt;&lt;b&gt;有一种东西不能遵循从众原则，那就是人的良心&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;如果别人把那当成一个侮辱性的字眼来骂你，并不能贬损你的人格。那只能让你看到，骂你的人有多可悲，他的谩骂并不能伤害到你&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;一个人没必要把自己懂的东西都展现出来 。&lt;/b&gt; 人们不喜欢他们身边有什么人比他们懂得多。这会让他们气不打一处来。你使用的语言再标准，也改变不了他们。除非他们自己想学，否则一点儿办法也没有。你要么闭上嘴巴，要么跟他们说一样的话。&lt;/li&gt;
&lt;li&gt;&lt;b&gt;你永远也不可能真正了解一个人，除非你穿上他的鞋子走来走去，站在他的角度考虑问题&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;
    
    </summary>
    
      <category term="笔记" scheme="http://ontheroad.nosace.cc/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="心理" scheme="http://ontheroad.nosace.cc/tags/%E5%BF%83%E7%90%86/"/>
    
      <category term="小说" scheme="http://ontheroad.nosace.cc/tags/%E5%B0%8F%E8%AF%B4/"/>
    
  </entry>
  
  <entry>
    <title>博客支持PWA和压缩</title>
    <link href="http://ontheroad.nosace.cc//org/2019-01-20-2019-01-20-hexo%E6%94%AF%E6%8C%81pwa%E5%92%8C%E5%8E%8B%E7%BC%A9.html"/>
    <id>http://ontheroad.nosace.cc//org/2019-01-20-2019-01-20-hexo支持pwa和压缩.html</id>
    <published>2019-01-19T16:00:00.000Z</published>
    <updated>2019-01-20T09:41:56.000Z</updated>
    
    <content type="html"><![CDATA[<div id="outline-container-org959adc8" class="outline-2"><h2 id="org959adc8">背景</h2><div class="outline-text-2" id="text-org959adc8"><p>最近接触了个新名词 <b>PWA</b> ，Progressive Web Apps，感觉有点意思。若干年前，APP得到工业界学术界的大力追捧，研究WEB多年的老板决定将研究方向转向APP。他相信APP将是WEB的终极形态，对此我一直不是很认同。我更倾向于三国演义的开篇语，“天下大势，分久必合，合久必分”。WEB分化为APP是其在移动端的无能为力所致，只要能解决离线浏览、推送通知等麻烦事，APP终将回归WEB大本营。而 <b>PWA</b> 有可能是一种解决方案。 <b>PWA</b> 由谷歌提出，通过引入相当于本地代理层的 <b>Service Worker</b> ，实现了结合最好的WEB和最好的原生应用的用户体验，包括且不限于更开放、去中心化、跨平台、可SEO、易分享、可离线、可推送、可安装等。众所周知的小程序本质上就是 <b>PWA</b> 的一种实现。本着无折腾不码农的原则，在本博客中引入了 <b>PWA</b> ，并且为了更好的用户体验添加了压缩模块。</p><blockquote><p>本文所有SHELL脚本代码均在博客根目录执行，Hexo版本3.8.0，Next版本6.7.0</p></blockquote><p><a id="more"></a></p></div></div><div id="outline-container-orgb9ad820" class="outline-2"><h2 id="orgb9ad820">支持 <b>PWA</b></h2><div class="outline-text-2" id="text-orgb9ad820"><p>配置很简单，脚本如下所示，需要注意的几个点是</p><ol class="org-ol"><li>所属网站必须已经正确开启HTTPS，猜测是因为 <b>Service Worker</b> 本身容易受到 <b>MITM</b> 攻击</li><li>manifest.json可以在<a href="https://app-manifest.firebaseapp.com/" target="_blank" rel="noopener">Web App Manifest Generator</a>中根据自己需求定制</li><li>icons的src必要与source目录中文件一一对应，否则mainfest.json不会被加载</li><li>判断是否正确支持 <b>PWA</b> 可以通过chrome的插件Lighthouse进行检测</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install hexo-offline</span></span><br><span class="line">npm i --save hexo-offline</span><br><span class="line"></span><br><span class="line"><span class="comment"># Config hexo-offline</span></span><br><span class="line">cat &gt;&gt; _config.yml &lt;&lt; END_TEXT</span><br><span class="line">offline:</span><br><span class="line">  maximumFileSizeToCacheInBytes: 5242880</span><br><span class="line">  staticFileGlobs:</span><br><span class="line">  - public/**/*.&#123;js,html,css,png,jpg,gif,svg,eot,ttf,woff,woff2&#125;</span><br><span class="line">  stripPrefix: public</span><br><span class="line">  verbose: <span class="literal">true</span></span><br><span class="line">END_TEXT</span><br><span class="line"></span><br><span class="line"><span class="comment"># Introduce manifest.json</span></span><br><span class="line">cat &gt;&gt; <span class="built_in">source</span>/manifest.json &lt;&lt; END_TEXT</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"OnTheRoad"</span>,</span><br><span class="line">  <span class="string">"short_name"</span>: <span class="string">"OnTheRoad"</span>,</span><br><span class="line">  <span class="string">"theme_color"</span>: <span class="string">"#2196f3"</span>,</span><br><span class="line">  <span class="string">"background_color"</span>: <span class="string">"#2196f3"</span>,</span><br><span class="line">  <span class="string">"display"</span>: <span class="string">"standalone"</span>,</span><br><span class="line">  <span class="string">"scope"</span>: <span class="string">"/"</span>,</span><br><span class="line">  <span class="string">"start_url"</span>: <span class="string">"/"</span>,</span><br><span class="line">  <span class="string">"icons"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"src"</span>: <span class="string">"images/icons/48.png"</span>,</span><br><span class="line">      <span class="string">"sizes"</span>: <span class="string">"48x48"</span>,</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"image/png"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"src"</span>: <span class="string">"images/icons/72.png"</span>,</span><br><span class="line">      <span class="string">"sizes"</span>: <span class="string">"72x72"</span>,</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"image/png"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"src"</span>: <span class="string">"images/icons/96.png"</span>,</span><br><span class="line">      <span class="string">"sizes"</span>: <span class="string">"96x96"</span>,</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"image/png"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"src"</span>: <span class="string">"images/icons/144.png"</span>,</span><br><span class="line">      <span class="string">"sizes"</span>: <span class="string">"144x144"</span>,</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"image/png"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"src"</span>: <span class="string">"images/icons/192.png"</span>,</span><br><span class="line">      <span class="string">"sizes"</span>: <span class="string">"192x192"</span>,</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"image/png"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"src"</span>: <span class="string">"images/icons/512.png"</span>,</span><br><span class="line">      <span class="string">"sizes"</span>: <span class="string">"512x512"</span>,</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"image/png"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"splash_pages"</span>: null</span><br><span class="line">&#125;</span><br><span class="line">END_TEXT</span><br><span class="line"></span><br><span class="line"><span class="comment"># Config manifest</span></span><br><span class="line">cat &gt;&gt; themes/next/layout/_custom/header.swig &lt;&lt; END_TEXT</span><br><span class="line">&lt;link rel=<span class="string">"manifest"</span> href=<span class="string">"/manifest.json"</span>&gt;</span><br><span class="line">END_TEXT</span><br></pre></td></tr></table></figure></div></div><div id="outline-container-orgad377db" class="outline-2"><h2 id="orgad377db">支持压缩</h2><div class="outline-text-2" id="text-orgad377db"><p>如下安装相应的包以及简单的JS代码即可实现。</p><blockquote><p>需要注意安装的gulp版本，本文配置对应的是4.0+。一开始没注意这个问题，最后一个task使用了网上广泛使用的3.0配置方式gulp.task('default', [    'minify-html','minify-css','minify-js', 'minify-images');</p><p>结果会抛出如下异常</p><p>assert.js:42  throw new errors.AssertionError({  ^</p><p>AssertionError [ERR_ASSERTION]: Task function must be specified</p><p>at Gulp.set [as _setTask] (/home/ww/ontheroad/blog/node_modules/undertaker/lib/set-task.js:10:3)</p><p>at Gulp.task (/home/ww/ontheroad/blog/node_modules/undertaker/lib/task.js:13:8)</p><p>at Object.&lt;anonymous&gt; (/home/ww/ontheroad/blog/gulpfile.js:41:6)</p><p>at Module._compile (module.js:652:30)</p><p>at Object.Module._extensions..js (module.js:663:10)</p><p>at Module.load (module.js:565:32)</p><p>at tryModuleLoad (module.js:505:12)</p><p>at Function.Module._load (module.js:497:3)</p><p>at Module.require (module.js:596:17)</p><p>at require (internal/module.js:11:18)</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install gulp</span></span><br><span class="line">npm install gulp-minify-css gulp-uglify gulp-htmlmin gulp-htmlclean gulp-imagemin gulp --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set up gulp script</span></span><br><span class="line">cat &gt; gulpfile.js &lt;&lt; END_TEXT</span><br><span class="line">var gulp = require(<span class="string">'gulp'</span>);</span><br><span class="line">var minifycss = require(<span class="string">'gulp-minify-css'</span>);</span><br><span class="line">var uglify = require(<span class="string">'gulp-uglify'</span>);</span><br><span class="line">var htmlmin = require(<span class="string">'gulp-htmlmin'</span>);</span><br><span class="line">var htmlclean = require(<span class="string">'gulp-htmlclean'</span>);</span><br><span class="line">var imagemin = require(<span class="string">'gulp-imagemin'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'minify-html'</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">  <span class="built_in">return</span> gulp.src(<span class="string">'./public/**/*.html'</span>)</span><br><span class="line">    .pipe(htmlclean())</span><br><span class="line">    .pipe(htmlmin(&#123;</span><br><span class="line">         removeComments: <span class="literal">true</span>,</span><br><span class="line">         minifyJS: <span class="literal">true</span>,</span><br><span class="line">         minifyCSS: <span class="literal">true</span>,</span><br><span class="line">         minifyURLs: <span class="literal">true</span>,</span><br><span class="line">    &#125;))</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'./public'</span>))</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'minify-css'</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> gulp.src(<span class="string">'./public/**/*.css'</span>)</span><br><span class="line">        .pipe(minifycss(&#123;</span><br><span class="line">            compatibility: <span class="string">'ie8'</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./public'</span>));</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'minify-js'</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> gulp.src([<span class="string">'./public/**/.js'</span>,<span class="string">'!./public/js/**/*min.js'</span>])</span><br><span class="line">        .pipe(uglify())</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./public'</span>));</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'minify-images'</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> gulp.src(<span class="string">'./public/images/**/*.*'</span>)</span><br><span class="line">        .pipe(imagemin(</span><br><span class="line">        [imagemin.gifsicle(&#123;<span class="string">'optimizationLevel'</span>: 3&#125;),</span><br><span class="line">        imagemin.jpegtran(&#123;<span class="string">'progressive'</span>: <span class="literal">true</span>&#125;),</span><br><span class="line">        imagemin.optipng(&#123;<span class="string">'optimizationLevel'</span>: 7&#125;),</span><br><span class="line">        imagemin.svgo()],</span><br><span class="line">        &#123;<span class="string">'verbose'</span>: <span class="literal">true</span>&#125;))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./public/images'</span>))</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'default'</span>, gulp.parallel(</span><br><span class="line">    <span class="string">'minify-html'</span>,<span class="string">'minify-css'</span>,<span class="string">'minify-js'</span>, <span class="string">'minify-images'</span></span><br><span class="line">));</span><br><span class="line">END_TEXT</span><br><span class="line"></span><br><span class="line"><span class="comment"># Deploy with gulp</span></span><br><span class="line">hexo c &amp;&amp; hexo g &amp;&amp; gulp &amp;&amp; hexo d</span><br></pre></td></tr></table></figure></div></div>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;outline-container-org959adc8&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;org959adc8&quot;&gt;背景&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-org959adc8&quot;&gt;
&lt;p&gt;
最近接触了个新名词 &lt;b&gt;PWA&lt;/b&gt; ，Progressive Web Apps，感觉有点意思。
若干年前，APP得到工业界学术界的大力追捧，研究WEB多年的老板决定将研究方向转向APP。
他相信APP将是WEB的终极形态，对此我一直不是很认同。
我更倾向于三国演义的开篇语，“天下大势，分久必合，合久必分”。
WEB分化为APP是其在移动端的无能为力所致，只要能解决离线浏览、推送通知等麻烦事，APP终将回归WEB大本营。
而 &lt;b&gt;PWA&lt;/b&gt; 有可能是一种解决方案。 &lt;b&gt;PWA&lt;/b&gt; 由谷歌提出，通过引入相当于本地代理层的 &lt;b&gt;Service Worker&lt;/b&gt; ，实现了结合最好的WEB和最好的原生应用的用户体验，包括且不限于更开放、去中心化、跨平台、可SEO、易分享、可离线、可推送、可安装等。
众所周知的小程序本质上就是 &lt;b&gt;PWA&lt;/b&gt; 的一种实现。
本着无折腾不码农的原则，在本博客中引入了 &lt;b&gt;PWA&lt;/b&gt; ，并且为了更好的用户体验添加了压缩模块。
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
本文所有SHELL脚本代码均在博客根目录执行，Hexo版本3.8.0，Next版本6.7.0
&lt;/p&gt;
&lt;/blockquote&gt;


&lt;p&gt;
    
    </summary>
    
      <category term="前端" scheme="http://ontheroad.nosace.cc/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Hexo" scheme="http://ontheroad.nosace.cc/tags/Hexo/"/>
    
      <category term="Next" scheme="http://ontheroad.nosace.cc/tags/Next/"/>
    
      <category term="PWA" scheme="http://ontheroad.nosace.cc/tags/PWA/"/>
    
  </entry>
  
  <entry>
    <title>Spring自动注入组件为空值的两个原因</title>
    <link href="http://ontheroad.nosace.cc//org/2019-01-18-2019-01-18-spring%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%85%A5%E7%BB%84%E4%BB%B6%E4%B8%BA%E7%A9%BA%E5%80%BC%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%8E%9F%E5%9B%A0.html"/>
    <id>http://ontheroad.nosace.cc//org/2019-01-18-2019-01-18-spring自动注入组件为空值的两个原因.html</id>
    <published>2019-01-17T16:00:00.000Z</published>
    <updated>2019-01-20T09:39:27.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>最近在用 <b>Spring Boot</b> 做个简单的API服务帮助管理线上服务日益庞大的配置项。<b>Spring Boot</b> 优秀的封装极大简化了API开发的工作量，很容易通过配置和注解自动生成所需对象。然而层层封装的框架更需要去了解底层细节，否则遇到问题经常一头雾水。作为副功能，没有太多时间去学习底层细节，只能出现问题慢慢调试，也遇到过本文所述的简单问题。简单记录一下，以免下次又栽跟头。本文翻译自Steve Claridge写的<a href="https://www.moreofless.co.uk/spring-mvc-java-autowired-component-null-repository-service/" target="_blank" rel="noopener">Two reasons why your Spring @Autowired component is null</a></p></blockquote><div id="outline-container-org15c8fdd" class="outline-2"><h2 id="org15c8fdd"><b>Spring</b> 自动注入组件为空值的两个原因</h2><div class="outline-text-2" id="text-org15c8fdd"><p><b>Spring</b> 框架大量应用控制反转(Inversion of Control, <b>IoC</b> )，使得开发者注入对象时无需关心作用域、生命周期及数据清理等繁琐事宜。</p><p>使用 <b>Spring</b> 比较常遇到的一种错误是，当你引用已经加了注解@Autowired的类时，发现它竟然是空值。为什么 <b>Spring</b> 没有自动帮你注入你的类呢？有两种可能的原因。</p><p><a id="more"></a></p></div><div id="outline-container-orgd92bf8f" class="outline-3"><h3 id="orgd92bf8f">手动实例化类</h3><div class="outline-text-3" id="text-orgd92bf8f"><p><b>IoC</b> 就像一个酷酷的小孩，可以不用，但如果要用，那就要都用。不要有的地方用注解，有的地方又自己实例化。比如下面这个代码片段，会导致MyService中repo为空值，从而在doStuff中抛出NullPointerException。不是因为MyRepository本身的注解有任何问题，而是因为MyService my = new MyService()手动实例化MyService导致。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">"/example"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">example</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyService my = <span class="keyword">new</span> MyService();</span><br><span class="line">    my.doStuff();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">MyService</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line">  MyRepository repo;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doStuff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    repo.findByName( <span class="string">"steve"</span> );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyRepository</span> <span class="keyword">extends</span> <span class="title">CrudRepository</span>&lt;<span class="title">My</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function">List&lt;My&gt; <span class="title">findByName</span><span class="params">( String name )</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修复这个问题很简单，如下所示，只需要将MyService也加上注解，使其通过 <b>IoC</b> 注入即可。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line">  MyService service;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">"/example"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">example</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    service.doStuff();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">MyService</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line">  MyRepository repo;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doStuff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    repo.findByName( <span class="string">"steve"</span> );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyRepository</span> <span class="keyword">extends</span> <span class="title">CrudRepository</span>&lt;<span class="title">My</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function">List&lt;My&gt; <span class="title">findByName</span><span class="params">( String name )</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div id="outline-container-org04b8c53" class="outline-3"><h3 id="org04b8c53">忘记注解 <b>@COMPONENT</b></h3><div class="outline-text-3" id="text-org04b8c53"><p><b>Spring</b> 通过组件扫描去发现需要注入的类。通常是扫描classpath目录，查找所有注解 <b>@Component</b> 的类，将它们标记为可自动注入。所以当你忘记注解你想使用的组件，将得到空值NullPointerException。</p><p><b>@Service*， *@Repository</b> 以及 <b>Controller</b> 都是特殊的 <b>@Component</b> ，所以需要自动注入的类都需要注解这四个其中之一。如下代码将导致空值。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doStuff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>加上 <b>@Component</b> 注解就可以了。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doStuff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;
最近在用 &lt;b&gt;Spring Boot&lt;/b&gt; 做个简单的API服务帮助管理线上服务日益庞大的配置项。
&lt;b&gt;Spring Boot&lt;/b&gt; 优秀的封装极大简化了API开发的工作量，很容易通过配置和注解自动生成所需对象。
然而层层封装的框架更需要去了解底层细节，否则遇到问题经常一头雾水。
作为副功能，没有太多时间去学习底层细节，只能出现问题慢慢调试，也遇到过本文所述的简单问题。
简单记录一下，以免下次又栽跟头。
本文翻译自Steve Claridge写的&lt;a href=&quot;https://www.moreofless.co.uk/spring-mvc-java-autowired-component-null-repository-service/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Two reasons why your Spring @Autowired component is null&lt;/a&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div id=&quot;outline-container-org15c8fdd&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;org15c8fdd&quot;&gt;&lt;b&gt;Spring&lt;/b&gt; 自动注入组件为空值的两个原因&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-org15c8fdd&quot;&gt;
&lt;p&gt;
&lt;b&gt;Spring&lt;/b&gt; 框架大量应用控制反转(Inversion of Control, &lt;b&gt;IoC&lt;/b&gt; )，
使得开发者注入对象时无需关心作用域、生命周期及数据清理等繁琐事宜。
&lt;/p&gt;

&lt;p&gt;
使用 &lt;b&gt;Spring&lt;/b&gt; 比较常遇到的一种错误是，当你引用已经加了注解@Autowired的类时，发现它竟然是空值。
为什么 &lt;b&gt;Spring&lt;/b&gt; 没有自动帮你注入你的类呢？有两种可能的原因。
&lt;/p&gt;

&lt;p&gt;
    
    </summary>
    
      <category term="前端" scheme="http://ontheroad.nosace.cc/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Spring" scheme="http://ontheroad.nosace.cc/tags/Spring/"/>
    
      <category term="翻译" scheme="http://ontheroad.nosace.cc/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>读书笔记-201812</title>
    <link href="http://ontheroad.nosace.cc//org/2019-01-03-2019-01-03-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-201812.html"/>
    <id>http://ontheroad.nosace.cc//org/2019-01-03-2019-01-03-读书笔记-201812.html</id>
    <published>2019-01-02T16:00:00.000Z</published>
    <updated>2019-01-20T09:39:28.000Z</updated>
    
    <content type="html"><![CDATA[<div id="outline-container-orgca85f99" class="outline-2"><h2 id="orgca85f99">非暴力沟通 (马歇尔•卢森堡)</h2><div class="outline-text-2" id="text-orgca85f99"><p>本书从说与听两方面阐述了怎么说别人才肯听以及怎么听别人才肯说。看似投机取巧，实则朴实无华，只是为了更清楚地沟通交流，并不是为了炫技。最简单的，反倒最不容易做到，大道至简。比如最重要最基本的Never Judge，就非常难以做到。</p><blockquote><p>书摘</p><ul class="org-ul"><li>清楚地表达观察结果，而不判断或评估</li><li>表达感受，例如受伤、害怕、喜悦、开心、气愤等等</li><li>说出哪些需要导致那样的感受</li><li><b>Never judge</b></li><li>我们大多数的人使用的语言倾向于评判、比较、命令和指责，而不是鼓励我们倾听彼此的感受和需要。</li><li><b>批评往往暗含着期待。</b> 对他人的批评实际上间接表达了我们尚未满足的需要。</li><li>我们提出的 <b>请求越具体越好。</b> 如果我们的意思含糊不清，别人就难以了解我们到底想要什么。</li><li>倾听他人意味着， <b>放下已有的想法和判断，一心一意地体会他人。</b></li><li>一般来说，如果一个人在说话时有明显的情绪，他一般会期待得到他人的反馈。</li><li>为了幸福，必须把“别人怎么看我”这个问题放在一边。</li><li>一旦我们 <b>把所谓的批评和指责看作是来自他人的礼物</b>&#x2013;为处于痛苦中的人提供服务的机会，我们就会感到这种幸福。</li><li>爱惜自己的关键之一是同时包容那两个不同的“我”：一方面包容对过去的某种行为感到后悔的“我”，另一方面包容采取那种行为的“我”。</li><li><b>我们心情并不取决于他人的行为。</b></li></ul></blockquote><p><a id="more"></a></p></div></div><div id="outline-container-orgc0e2c98" class="outline-2"><h2 id="orgc0e2c98">为何家会伤人 (武志红)</h2><div class="outline-text-2" id="text-orgc0e2c98"><p>看过几次这个书名，总是本能地躲避之，想说家那么温暖，怎么会伤人呢？应该是哗众取宠吧？事实上越亲密的人确实越容易互相伤害。书中认为父母关系是家庭关系的核心，这是很容易被忽视的地方，许多小孩子莫名其妙的行为原来都源于不和谐的父母关系。再深的爱也难免要面对分离，亲子关系也不例外，应该给予孩子爱并鼓励其独立自主。再大一点的孩子会面临许许多多的选择，生命的价值在于选择，但做父母的常常忘记这一点。中国式家庭恰恰对于这三方面都严重不符，父母关系糟糕不已-没有核心，对孩子过度溺爱-不会分离，满心期待-没得选择，于是产生了各种伤人的家庭问题。</p><blockquote><p>书摘</p><ul class="org-ul"><li>恋爱，其主要意义不是让我们找到一个能黏一辈子的伴侣，而是让我们真正明白自己是一个独立的人，伴侣是另外一个和自己一样独立、一样重要的人。并且，我们还深深地懂得，这两个相互独立的人，又能无比亲密地相处</li><li><b>你再亲密的人也是另外一个人，是和我们一样重要、一样独立的人。</b> 如果学到这一点，我们就会真正明白，整个世界都是由和自己一模一样的独立的人组成的，每个人都同等重要。</li><li>任何看似荒诞的事情背后，都有它最真切的原因。如果你觉得它荒诞，那很可能是因为你不理解它</li><li>不管你多么敬爱父母，你终究要离开他们，去过你自己的生活。不管你多么爱儿女，他们也终究要离开你，去过他们自己的生活。</li><li>在任何关系中，我的感受能被感受到，这一刻，我存在，你也存在。这一刻，就是爱。</li><li>父母不要试图扮演孩子的决定者，而应该给予孩子独立探索的自由，那样即便幼小的孩子也一样是一个“成为自己的人”。</li><li><b>父母的职责是用爱给孩子提供一个安全的环境，但至于如何探索世界，那是孩子的自由。爱与自由，缺一不可</b></li><li>成熟分离。 <b>一边给予爱，一边坚定地告诉孩子或亲人，你是你，我是我。</b> 这样一来，关系仍然亲密，但关系中的两个人都拥有独立而健康的人格。</li><li>这个阶段，妈妈需要关注并保护孩子，但又不要替他们完成任务。这种程度的把握是非常微妙的。这个阶段的幼儿知道但又不愿意承认自己还不能独立地应付环境。因为这种矛盾心理，幼儿很容易受伤。</li><li><b>所有的心理问题都源自对真相的扭曲</b> ，这在亲子关系上也不例外，</li><li>经常当着儿子的面指责丈夫不能干、挣钱太少，结果儿子就学会了用挣钱多少去衡量一个人的价值。 更要命的是，这样的孩子可能学会和妈妈一起嘲笑爸爸，这不仅会让爸爸受伤害，也会让这个孩子看不起爸爸，从而不愿意向爸爸认同，最终就表现成不愿意向男性认同，并在以后遇到一系列的问题。 同样的道理，如果一个男人经常当着女儿的面嘲笑妻子笨，不会持家，那么女儿也会看不起妈妈。</li><li>孩子称为“家庭中的救世主”，就是因为孩子天生有一种倾向，要牺牲自己，以平衡父母的关系。</li><li>如果父母的关系和谐而平衡，同时又爱孩子，那么孩子自然而然会成为健康的 孩子，爱父母且以父母为傲。如果父母的关系是倾斜的，那么孩子就会做出种种匪夷所思的事情以平衡这个关系，造成家庭关系中种种迷雾和假象。</li><li><b>父母关系才是孩子心理健康的模板</b> ，而且也是孩子以后进入社会、与他人建立关系的模板。</li><li><b>溺爱源自父母的自恋</b> ，溺爱的父母无视孩子真实的成长需要，而是将孩子当作自己的另一个“我”，给予过度满足。可以说，无限制地给予孩子，其实是在无限制地给予自己。</li><li>孩子是一个独立的人，不是‘我’的附属品，要做到这一点，并不容易，所以很多父母选择了偷懒的溺爱</li><li><b>0～1.5岁的孩子，最重要的是培育安全感，给予孩子无条件的爱，1.5～3岁的孩子，最重要的是培育他们的自主能力，尊重孩子自主的探索，但又在孩子需要帮助时出现在他面前。</b></li><li>有谁能比我们更清楚自己的感受呢？</li><li>溺爱常常是强加，也即父母将自己的意志强加到孩子头上，并将之视为爱。孩子感觉到被否定了，但他却无法清晰地意识到这一点，因为父母和别人都觉得这是爱。譬如，孩子说，我吃饱了，大人说，你正长身体，多吃点。吃饱的感觉很好，但吃撑的感觉就很不好。我们整个社会都将溺爱说成爱太多，孩子需要很强的自我才能意识到，他其实是被伤害了。</li><li><b>爱只会导致好的结果，而不会导致伤害，导致伤害的一定不是爱。</b></li><li>习惯于溺爱的父母或者看不得孩子“受苦”，或者不愿意让孩子添乱，于是不给孩子自主探索的机会，而是帮他们做各种各样的事情。</li><li><b>看到孩子的真实存在，发现孩子的真实需要，并帮孩子实现他的需要，这便是真爱。</b> 譬如，当一个蹒跚学步的孩子想去拿十米外的球时，他的真实需要不仅是要拿到那个球，还必须要自己完成。这时的真爱不是替孩子拿到那个球，而是陪伴着、守护着孩子，看着他独立完成这个任务，并在他遇到危险的时候化解他的真实危险。相比拿到球，孩子更重要的需要是要独立完成这个过程。在跌跌撞撞地走向这个球的过程中，他的手、脚和身体会产生一系列的感觉和体验。他会感觉到，是他在努力，是他在运动，是他在感受。再比如说，当一个孩子明确地对你说“我来……我来……”的时候，他的真实需要就是这种自主行动的愿望。耐心地满足孩子的这种愿望，之后收拾孩子留下的混乱局面，这便是真爱，并且这的确比帮孩子解决问题要难多了。</li><li>真爱是不存在“过度”这一说的。如果是真爱，那么父母不管给孩子多少，孩子都不会出问题。</li><li>帮一个16个月的蹒跚学步的孩子拿一个十米外的球，对于父母而言是再简单不过的事，但帮一个16岁的孩子交友、学习甚至谈恋爱，却是父母很难做到的事情，而帮一个26岁甚至36岁的大孩子实现真正的价值感，则成了任何一个父母都不可能完成的任务了。</li><li>青春期是一个心理变化非常剧烈的阶段，因为他什么都想尝试</li><li>如果孩子比较叛逆，你起码不用担心他会想到自杀，因为叛逆的孩子一般会有较强的生命力。相反，如果孩子非常听话，那父母倒是应该有所担忧。</li><li>评定孩子是否陷入抑郁症的标准可以概括为“三少”，即话少、行动少、情绪少。</li><li>言行不重要，重要的是感受</li><li>谁都知道疼，有安全感的孩子会哭出来。哭是一种信任，哭的孩子知道，只要一哭，爸爸妈妈就会过来呵护他，这种爱会减少其心理疼痛和不安。</li><li>安全感强的人不会太关注别人的消极信息</li><li>一个人如果在童年只获得了很少的安全感，长大后就很难再重新建立一个安全岛。</li><li><b>客体稳定的概念，在良好的养育环境下，孩子一岁半即可形成，而情感稳定的概念，在良好的养育环境下，要到三岁才能形成。</b></li><li><b>生命的价值在于选择，但做父母的常常忘记这一点，他们不让孩子去作选择，总是忍不住要替孩子作选择</b></li><li>如果孩子没有秘密，那么孩子永远不能长大。</li><li>如果父母什么都替孩子做主，那么就是在杀死孩子的生命。</li><li>父母与孩子的关系模式，是孩子与其他人建立关系的基础，也是孩子的人格和情商的基石，这比知识更重要。</li><li>毫无条件地生活，就是接受自己是个可能犯错的血肉凡躯，并欢迎改变、死亡和受苦。处在至乐中，无论舒服还是痛苦，我们都欣然接受；我们不执着于结果，而能享受和体验充实的人生；我们对于沿途的幸福安适与种种经验充满了感恩之心，而能心平气和地对待他人和自己…</li><li>当我在关系中放下了所有的期待和设想，不再将你视为我的目标或实现目标的对象，我就可能在某一瞬间与全然的“你”相遇。</li></ul></blockquote></div></div><div id="outline-container-orga4670d9" class="outline-2"><h2 id="orga4670d9">身体从未忘记：心理创伤疗愈中的大脑、心智和身体 (心理创伤疗愈经典畅销丛书) (范德考克)</h2><div class="outline-text-2" id="text-orga4670d9"><p>在奇葩说上听到马东推荐这本书，恰好对于这方面颇有兴趣，立马买回来阅读。书中从专业角度阐述了PTSD的根源和解决方案。专业细节看得不是很明白，基本的想法大致能明白。生存是大脑的第一法则，安全感是人的基本需求。有的人安全感比较厚，有的人比较薄，然而不论安全感多么强大，一旦被外界刺激击穿安全感的边界，都会造成难以预测的后果。生理的紊乱，心理的混乱，不一而足。所以对于安全感相对成人薄弱的孩子更应该小心翼翼，使其安全感构成控制感的核心，成为贯穿人生中健康的应对模式的关键。有趣的是作者在神秘的东方古法，如冥想、瑜伽中，找到了重整自律神经系统的有效方法。自古以来，西方文化比较推崇动，生命在于运动，东方文化则偏爱静，静以修身。现代东方已经比较接受生命在于运动的理念，西方似乎也有点开始接纳不讲科学没有逻辑的东方秘法，期待二者能产生越来越多的化学反应。</p><blockquote><p>书摘</p><ul class="org-ul"><li>人类最痛苦的莫过于爱与失去，因此，治疗者要做的，是帮助人们“了解、体验以及容忍”生活的真实，包括其中所有的愉快与悲伤。“我们痛苦的最大来源是我们的自我欺骗。”他驱使我们尽可能诚实地面对自己的每种经历。他常常说，人们如果不知道自己所知道的，感觉不到自己所感觉到的，就永远不能痊愈。</li><li>疗愈仰赖于亲身经验：你只有彻彻底底了解你的身体之后，你才能控制你的生活。</li><li><b>仅仅提供逃脱的机会并不能让受过创伤的动物或人类重返自由。</b> 如同梅尔和塞利格曼的狗一样，很多受过创伤的人放弃了。他们沉浸在自己已知的恐惧当中，不去冒险寻找新的选择。</li><li>大脑-疾病模型忽视了以下事实：①人与人之间既可以互相毁灭，也可以互相拯救：恢复社会关系是康复的中心；②语言给予我们改变自我和他人的力量，通过叙述经历，我们得以了解自我和世界的意义；③我们可以调节我们的生理状况，包括可以通过简单的呼吸、动作和触摸调节我们身体和大脑的自主运动；④我们可以改变社会状态，创造一个大人小孩都能感到安全和蓬勃发展的环境。</li><li><b>孩子应对灾难的方式通常取决于他们的父母。只要他们的养育者仍然保持平静镇定，回应孩子的需求，那么，即使孩子们经历过可怕的事情，也能够健康地成长。</b></li><li>自上而下的情绪调节意味着强化瞭望塔控制身体感觉的能力。正念冥想和瑜伽都可以帮助这一点。自下而上的情绪调节需要重整自律神经系统（即我们在上图中见到的脑干部位）。我们可以通过呼吸、动作和触摸调整自律神经系统。</li><li>只有很少的心理问题是理解不足造成的，我们的意识和感知可以理解大多数起源于大脑深处的压力。当情绪脑中警铃大作，如何洞察都是不能平息的。</li><li>我们的教育系统和很多号称可以治疗创伤的方式都倾向于忽略我们的情感参与系统，而关注在我们的认知思维能力中。</li><li>成人越是回应孩子的需求，他们的依恋就越深，而孩子也越有可能与其他人发展健康的回应。</li><li>如何控制冲动是生活中的基本技能，因此，父母必须先于孩子能做到这一点之前，先为孩子控制冲动。当腹中的饥饿感让婴儿哭泣，乳房和奶瓶就该送到；当孩子感到恐惧，有人应当去抱着并摇动他，直到他安静下来；如果他尿床，应当立刻去清理。与强烈的安全感、舒适感和控制感相关，这些是自我调节、自我安慰、自我养育的基础</li><li><b>安全依恋与能力的发展，逐渐构成控制感的核心，成为贯穿人生中健康的应对模式的关键</b></li><li><b>如果母亲不能满足婴儿的冲动和需要，“婴儿就会学会如何成为母亲心中的婴儿”。这是一种不完整的内在感受，它会试图进行自我调整，优先满足养育者的需要，使孩子认为自身内在产生的需要“是错误的”。</b></li><li>依恋的研究者认为，这三种“有条理”的依恋策略（安全、回避、焦虑）都是有效的，因为这些策略能让他们的养育者提供尽量多的关爱。</li><li>修复关系的关键是儿童是否可以在与父母或养育者的相处中打心眼里感到安全。</li><li>脆弱的婴儿和僵化的养育者容易养出紧张而依赖的孩子。在婴儿出生后头6个月时给予密集的、强迫性的和入侵性的照顾可以预测幼儿园及之后的过度活跃或注意力问题。</li><li><b>到目前为止，最重要的、能够预测受试者能成功应对生活中难以避免的挫折的是：在人生中的头两年中与主要的养育者建立足够的安全感</b></li><li>EMDR是所有发表的PTSD治疗研究中，针对成年人最有效的治疗方式</li><li>尽管创造结构剧场需要通过对话，心身疗法不试图解读过去。相反，心身疗法让你感觉到过去，试图重塑你曾经见过的场景，说出你在事件发生时想说却无法说出的话</li><li>每个人都有自己的难处。但我们知道和怎样的父母在一起成长能帮助孩子们在日后成为一个自信而有能力的成年人： <b>那些稳定和可预期的父母；那些会为你、你的探索和发现感到高兴的父母；那些帮助你适应环境和独立生活的父母；那些在自我照顾和社会交往中都能作为楷模的父母。</b></li></ul></blockquote></div></div><div id="outline-container-orgec520b6" class="outline-2"><h2 id="orgec520b6">亲密关系 (博集外国文学书榜系列) (孟(Moon C.))</h2><div class="outline-text-2" id="text-orgec520b6"><p>爱情是人类所有情感中最美妙的一种体验，作者从心理学的角度剖析了这种微妙感觉的特点。从彼此吸引到相互依赖再到紧张冲突最后消亡或修复，每个阶段的亲密关系都有需要注意的地方。</p><blockquote><p>书摘</p><ul class="org-ul"><li>绝对的爱是无条件的：通常我们在亲密关系中所谓的爱，事实上是由于伴侣的行为所带来的满足感，或对于重要感与归属感的需求。真正的爱是无条件的，完全与任何情境和情势无关，无法从他人那儿获取，也非由他人的行为而触发，而是因为你就是你！一段关系的目的不是给予与接受彼此的爱，而是帮助你了解你自己就是一直以来所寻找的爱。</li><li>一面镜子，让你看见引发你关注的不舒服感；一名老师，在你探寻真实自我的时候，激励与启发你；一名“玩伴”，开启并陪伴你一段生命的旅程。</li><li>我们需要的是能鼓励我们超越自我的伴侣，我们在追寻的是能激发人生意义与方向，并在我们受到考验时，给予我们帮助的人际关系。这也就是“灵魂关系”。</li><li><b>孩童的两大主要需求是归属感和确认自己的重要性。</b></li><li><b>通往地狱之路，是用期望铺成的。</b></li><li>大人其实也只是幼稚的小孩</li><li>每个人都会伤害他所爱的事物</li><li>亲密关系中最大的问题便是我们面对痛苦的态度。每段亲密关系都会遇到困难，而每个问题的背后，都伴随着某种情绪的伤痛</li><li>要去了解、接受或宽恕，毕竟不是那么容易，相比较起来，发怒就简单得多。</li><li>不幸的是，用愤怒来保护自己，永远比面对痛苦要容易得多。</li><li>所有攻击都是出于自卫。</li><li>只要你肯放下立场，不管结果是怎样，对你永远是只有好处没有坏处的，因为坚持立场所得到的，只有理直气壮和骄傲所带来的不真实的安全感。放了手，就能得到自由，让自己在智慧和成熟中成长。</li><li><b>你所看到的每件事，都是你内心世界的投射。</b></li><li>要得到真正的知识，必须提出问题、超脱已知事物。</li><li>基本上所有的恐惧都是害怕会失去某些东西</li><li>真心的付出能让你了解真正的自己。</li><li>我们对别人行为举止的诠释，都只不过是把我们对自己的评价及信念投射出来罢了。</li><li>所有的怀疑都是对自己的怀疑。</li><li>重要的不是你做了些什么，而是你是什么样的人</li></ul></blockquote></div></div><div id="outline-container-org72f5e54" class="outline-2"><h2 id="org72f5e54">养育男孩（典藏版） (史蒂夫·比达尔夫)</h2><div class="outline-text-2" id="text-org72f5e54"><p>个人感觉没什么共鸣点，不值一读</p></div></div>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;outline-container-orgca85f99&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;orgca85f99&quot;&gt;非暴力沟通 (马歇尔•卢森堡)&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-orgca85f99&quot;&gt;
&lt;p&gt;
本书从说与听两方面阐述了怎么说别人才肯听以及怎么听别人才肯说。
看似投机取巧，实则朴实无华，只是为了更清楚地沟通交流，并不是为了炫技。
最简单的，反倒最不容易做到，大道至简。
比如最重要最基本的Never Judge，就非常难以做到。
&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;
书摘
&lt;/p&gt;
&lt;ul class=&quot;org-ul&quot;&gt;
&lt;li&gt;清楚地表达观察结果，而不判断或评估&lt;/li&gt;
&lt;li&gt;表达感受，例如受伤、害怕、喜悦、开心、气愤等等&lt;/li&gt;
&lt;li&gt;说出哪些需要导致那样的感受&lt;/li&gt;
&lt;li&gt;&lt;b&gt;Never judge&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;我们大多数的人使用的语言倾向于评判、比较、命令和指责，而不是鼓励我们倾听彼此的感受和需要。&lt;/li&gt;
&lt;li&gt;&lt;b&gt;批评往往暗含着期待。&lt;/b&gt; 对他人的批评实际上间接表达了我们尚未满足的需要。&lt;/li&gt;
&lt;li&gt;我们提出的 &lt;b&gt;请求越具体越好。&lt;/b&gt; 如果我们的意思含糊不清，别人就难以了解我们到底想要什么。&lt;/li&gt;
&lt;li&gt;倾听他人意味着， &lt;b&gt;放下已有的想法和判断，一心一意地体会他人。&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;一般来说，如果一个人在说话时有明显的情绪，他一般会期待得到他人的反馈。&lt;/li&gt;
&lt;li&gt;为了幸福，必须把“别人怎么看我”这个问题放在一边。&lt;/li&gt;
&lt;li&gt;一旦我们 &lt;b&gt;把所谓的批评和指责看作是来自他人的礼物&lt;/b&gt;&amp;#x2013;为处于痛苦中的人提供服务的机会，我们就会感到这种幸福。&lt;/li&gt;
&lt;li&gt;爱惜自己的关键之一是同时包容那两个不同的“我”：一方面包容对过去的某种行为感到后悔的“我”，另一方面包容采取那种行为的“我”。&lt;/li&gt;
&lt;li&gt;&lt;b&gt;我们心情并不取决于他人的行为。&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;
    
    </summary>
    
      <category term="笔记" scheme="http://ontheroad.nosace.cc/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="心理" scheme="http://ontheroad.nosace.cc/tags/%E5%BF%83%E7%90%86/"/>
    
      <category term="教育" scheme="http://ontheroad.nosace.cc/tags/%E6%95%99%E8%82%B2/"/>
    
  </entry>
  
  <entry>
    <title>Hexo-Next主题美化</title>
    <link href="http://ontheroad.nosace.cc//org/2018-12-20-2018-12-20-hexo-next%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96.html"/>
    <id>http://ontheroad.nosace.cc//org/2018-12-20-2018-12-20-hexo-next主题美化.html</id>
    <published>2018-12-19T16:00:00.000Z</published>
    <updated>2019-01-20T09:39:28.000Z</updated>
    
    <content type="html"><![CDATA[<div id="outline-container-org70be2be" class="outline-2"><h2 id="org70be2be">前言</h2><div class="outline-text-2" id="text-org70be2be"><p>之前匆匆上线，只是简单配置了一下Next进行渲染，总感觉少了点什么。问了一下谷歌，发现<a href="https://www.jianshu.com/p/9f0e90cc32c2" target="_blank" rel="noopener">Hexo-NexT配置超炫网页效果</a>一文收集了不少有趣的效果。于是选择了一些效果使用Shell脚本应用到本博客，在此记录一下修改，以免之后又忘光。</p><blockquote><p>本文所有SHELL脚本代码均在博客根目录执行，Hexo版本3.7.0，Next版本6.6.0</p></blockquote></div></div><div id="outline-container-org4da5a23" class="outline-2"><h2 id="org4da5a23">修改代码显示效果</h2><div class="outline-text-2" id="text-org4da5a23"><p>主题默认自带tomorrow代码块风格，配置文件中highlight_theme默认值为normal，在主题配置文件中开启copy_button功能，在博客配置文件中开启auto_detect功能。然而既不显示行号，也没有copy_button，猜测是org-octopress缘故，看了一下源代码，最终在emacs文件中添加(setq org-jekyll-use-src-plugin t)，搞定。</p></div></div><div id="outline-container-org5e9be97" class="outline-2"><h2 id="org5e9be97">添加GitHub挂件</h2><div class="outline-text-2" id="text-org5e9be97"><p>挂件代码corner_code可从<a href="https://blog.github.com/2008-12-19-github-ribbons/" target="_blank" rel="noopener">GitHub Ribbons</a>或者<a href="http://tholman.com/github-corners/" target="_blank" rel="noopener">GitHub Corners</a>获取</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Replace the your-url as your git hub repo</span></span><br><span class="line">corner_code=<span class="string">'&lt;a href="https://your-url" class="github-corner" aria-label="View source on GitHub"&gt;&lt;svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"&gt;&lt;path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"&gt;&lt;/path&gt;&lt;path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"&gt;&lt;/path&gt;&lt;path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;style&gt;.github-corner:hover .octo-arm&#123;animation:octocat-wave 560ms ease-in-out&#125;@keyframes octocat-wave&#123;0%,100%&#123;transform:rotate(0)&#125;20%,60%&#123;transform:rotate(-25deg)&#125;40%,80%&#123;transform:rotate(10deg)&#125;&#125;@media (max-width:500px)&#123;.github-corner:hover .octo-arm&#123;animation:none&#125;.github-corner .octo-arm&#123;animation:octocat-wave 560ms ease-in-out&#125;&#125;&lt;/style&gt;'</span></span><br><span class="line">sed -i <span class="string">"/headband/a<span class="variable">$corner_code</span>"</span> -i themes/next/layout/_layout.swig </span><br></pre></td></tr></table></figure></div></div><div id="outline-container-org393d99f" class="outline-2"><h2 id="org393d99f">修改链接显示颜色</h2><div class="outline-text-2" id="text-org393d99f"><p>由于默认链接颜色与非链接颜色一致，视觉效果上不容易区分，有必要对其进行修改</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt; themes/next/<span class="built_in">source</span>/css/_common/components/post/post.styl &lt;&lt; END_TEXT</span><br><span class="line">// Link style</span><br><span class="line">.post-body p a&#123;// Color without mouse</span><br><span class="line">  color: <span class="comment">#0593d3; // Link color</span></span><br><span class="line">  border-bottom: none;</span><br><span class="line">  border-bottom: 1px solid <span class="comment">#0593d3; // Underline color</span></span><br><span class="line">  &amp;:hover &#123; // Color with mouse</span><br><span class="line">    color: <span class="comment">#fc6423;</span></span><br><span class="line">    border-bottom: none;</span><br><span class="line">    border-bottom: 1px solid <span class="comment">#fc6423;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">END_TEXT</span><br></pre></td></tr></table></figure><p><a id="more"></a></p></div></div><div id="outline-container-org26e96a9" class="outline-2"><h2 id="org26e96a9">修改底部标签样式</h2><div class="outline-text-2" id="text-org26e96a9"><p>默认文章底部的标签样式是个井号，将其改成图标会好看许多。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">'s/rel="tag"&gt;#/rel="tag"&gt;&lt;i class="fa fa-tag"&gt;&lt;\/i&gt;/g'</span> themes/next/layout/_macro/post.swig </span><br></pre></td></tr></table></figure></div></div><div id="outline-container-org6917ffd" class="outline-2"><h2 id="org6917ffd">添加文章结束标记</h2><div class="outline-text-2" id="text-org6917ffd"><p>默认文章结尾没有任何标记，添加结束标记既可以增加辨识度还可以隔离以后可能会添加的评论区。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">cat &gt;&gt; themes/next/layout/_macro/post-end-tag.swig &lt;&lt; END_TEXT</span><br><span class="line">&lt;div&gt;</span><br><span class="line">  &#123;% <span class="keyword">if</span> not is_index %&#125;</span><br><span class="line">    &lt;div style=<span class="string">"text-align:center;color: #ccc;font-size:14px;"</span>&gt;--------------本文结束&lt;i class=<span class="string">"fa fa-paw"</span>&gt;&lt;/i&gt;感谢您的阅读--------------&lt;/div&gt;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">END_TEXT</span><br><span class="line"></span><br><span class="line">&gt; /tmp/a</span><br><span class="line">cat &gt;&gt; /tmp/a &lt;&lt; END_TEXT</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;% <span class="keyword">if</span> not is_index %&#125;</span><br><span class="line">        &#123;% include <span class="string">'post-end-tag.swig'</span> %&#125; </span><br><span class="line">      &#123;% endif %&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">END_TEXT</span><br><span class="line"></span><br><span class="line">sed <span class="string">'/END POST BODY/&#123;n</span></span><br><span class="line"><span class="string">r /tmp/a</span></span><br><span class="line"><span class="string">&#125;'</span> themes/next/layout/_macro/post.swig</span><br><span class="line"></span><br></pre></td></tr></table></figure></div></div><div id="outline-container-org092b603" class="outline-2"><h2 id="org092b603">添加文章边框阴影</h2><div class="outline-text-2" id="text-org092b603"><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt;  themes/next/<span class="built_in">source</span>/css/_custom/custom.styl &lt;&lt; END_TEXT</span><br><span class="line">// Shadow margin <span class="keyword">for</span> post</span><br><span class="line">.post &#123;</span><br><span class="line">    margin-top: 60px;</span><br><span class="line">    margin-bottom: 60px;</span><br><span class="line">    padding: 25px;</span><br><span class="line">    -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5);</span><br><span class="line">    -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5);</span><br><span class="line">&#125;</span><br><span class="line">END_TEXT</span><br></pre></td></tr></table></figure></div></div><div id="outline-container-orge0ece6f" class="outline-2"><h2 id="orge0ece6f">底部显示访客统计</h2><div class="outline-text-2" id="text-orge0ece6f"><p>由于不蒜子域名变更了，原文的配置已经失效，新域名为<a href="http://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" target="_blank" rel="noopener">http://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">code=<span class="string">"&lt;script async src=\"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\"&gt;&lt;/script&gt;"</span></span><br><span class="line">sed <span class="string">"1 i <span class="variable">$code</span>"</span> themes/next/layout/_partials/footer.swig</span><br><span class="line"></span><br><span class="line">IFS=<span class="string">''</span></span><br><span class="line">number=0</span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">"<span class="variable">$line</span>"</span> =~ <span class="string">'theme.footer.powered.enable'</span> &amp;&amp; <span class="variable">$number</span> = 0 ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"&lt;div class=\"powered-by\"&gt;"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"&lt;i class=\"fa fa-user-md\"&gt;&lt;/i&gt;&lt;span id=\"busuanzi_container_site_pv\"&gt;"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"  本站访客数:&lt;span id=\"busuanzi_value_site_pv\"&gt;&lt;/span&gt;"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"&lt;/span&gt;"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"&lt;/div&gt;"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line">        number=1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$line</span>"</span></span><br><span class="line"><span class="keyword">done</span> &lt; themes/next/layout/_partials/footer.swig</span><br></pre></td></tr></table></figure></div></div><div id="outline-container-org3e8e298" class="outline-2"><h2 id="org3e8e298">开启字数时长统计</h2><div class="outline-text-2" id="text-org3e8e298"><p>原文的hexo-wordcount插件貌似已经被Next废弃，现在应用hexo-symbols-count-time插件，主题默认配置中已经开启统计，但还需在站点配置中开启。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-symbols-count-time --save</span><br><span class="line">cat &gt;&gt; _config.yml &lt;&lt; END_TEXT</span><br><span class="line">symbols_count_time:</span><br><span class="line">  symbols: <span class="literal">true</span></span><br><span class="line">  time: <span class="literal">true</span></span><br><span class="line">  total_symbols: <span class="literal">true</span></span><br><span class="line">  total_time: <span class="literal">true</span></span><br><span class="line">END_TEXT</span><br></pre></td></tr></table></figure></div></div><div id="outline-container-org75d6de3" class="outline-2"><h2 id="org75d6de3">文章添加版权信息</h2><div class="outline-text-2" id="text-org75d6de3"><p>原文的添加方式是针对Markdown格式的，对于org-mode，想要自动添加版权信息，只好硬着头皮改org-octopress的源文件。没折腾过LISP，费了不少时间，特别是不知道emacs使用的是elc文件，还一直误以为是改动有问题。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">cat &gt; themes/next/layout/_macro/my-copyright.swig &lt;&lt; END_TEXT</span><br><span class="line">&#123;% <span class="keyword">if</span> page.copyright %&#125;</span><br><span class="line">&lt;div class=<span class="string">"my_post_copyright"</span>&gt;</span><br><span class="line">  &lt;script src=<span class="string">"//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">  &lt;script src=<span class="string">"https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=<span class="string">"https://unpkg.com/sweetalert/dist/sweetalert.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;本文标题:&lt;/span&gt;&lt;a href=<span class="string">"&#123;&#123; url_for(page.path) &#125;&#125;"</span>&gt;&#123;&#123; page.title &#125;&#125;&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;文章作者:&lt;/span&gt;&lt;a href=<span class="string">"/"</span> title=<span class="string">"访问 &#123;&#123; theme.author &#125;&#125; 的个人博客"</span>&gt;&#123;&#123; theme.author &#125;&#125;&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;发布时间:&lt;/span&gt;&#123;&#123; page.date.format(<span class="string">"YYYY年MM月DD日 - HH:MM"</span>) &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;最后更新:&lt;/span&gt;&#123;&#123; page.updated.format(<span class="string">"YYYY年MM月DD日 - HH:MM"</span>) &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;原始链接:&lt;/span&gt;&lt;a href=<span class="string">"&#123;&#123; url_for(page.path) &#125;&#125;"</span> title=<span class="string">"&#123;&#123; page.title &#125;&#125;"</span>&gt;&#123;&#123; page.permalink &#125;&#125;&lt;/a&gt;</span><br><span class="line">    &lt;span class=<span class="string">"copy-path"</span>  title=<span class="string">"点击复制文章链接"</span>&gt;&lt;i class=<span class="string">"fa fa-clipboard"</span> data-clipboard-text=<span class="string">"&#123;&#123; page.permalink &#125;&#125;"</span>  aria-label=<span class="string">"复制</span></span><br><span class="line"><span class="string">成功！"</span>&gt;&lt;/i&gt;&lt;/span&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;许可协议:&lt;/span&gt;&lt;i class=<span class="string">"fa fa-creative-commons"</span>&gt;&lt;/i&gt; &lt;a rel=<span class="string">"license"</span> href=<span class="string">"https://creativecommons.org/licenses/by-nc-nd/4.0/"</span> target=<span class="string">"_blank"</span> title=<span class="string">"Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)"</span>&gt;署名-非商业性使用-禁止演绎 4.0 国际&lt;/a&gt; 转</span><br><span class="line">载请保留原文链接及作者。&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var clipboard = new Clipboard(<span class="string">'.fa-clipboard'</span>);</span><br><span class="line">    $(<span class="string">".fa-clipboard"</span>).click(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">      clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        swal(&#123;</span><br><span class="line">          title: <span class="string">""</span>,</span><br><span class="line">          text: <span class="string">'复制成功'</span>,</span><br><span class="line">          icon: <span class="string">"success"</span>,</span><br><span class="line">          showConfirmButton: <span class="literal">true</span></span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line">END_TEXT</span><br><span class="line"></span><br><span class="line">cat &gt;&gt; themes/next/<span class="built_in">source</span>/css/_common/components/post/ &lt;&lt; END_TEXT</span><br><span class="line">.my_post_copyright &#123;</span><br><span class="line">  width: 85%;</span><br><span class="line">  max-width: 45em;</span><br><span class="line">  margin: 2.8em auto 0;</span><br><span class="line">  padding: 0.5em 1.0em;</span><br><span class="line">  border: 1px solid <span class="comment">#d3d3d3;</span></span><br><span class="line">  font-size: 0.93rem;</span><br><span class="line">  line-height: 1.6em;</span><br><span class="line">  word-break: <span class="built_in">break</span>-all;</span><br><span class="line">  background: rgba(255,255,255,0.4);</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright p&#123;margin:0;&#125;</span><br><span class="line">.my_post_copyright span &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  width: 5.2em;</span><br><span class="line">  color: <span class="comment">#b5b5b5;</span></span><br><span class="line">  font-weight: bold;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright .raw &#123;</span><br><span class="line">  margin-left: 1em;</span><br><span class="line">  width: 5em;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright a &#123;</span><br><span class="line">  color: <span class="comment">#808080;</span></span><br><span class="line">  border-bottom:0;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright a:hover &#123;</span><br><span class="line">  color: <span class="comment">#a3d2a3;</span></span><br><span class="line">  text-decoration: underline;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright:hover .fa-clipboard &#123;</span><br><span class="line">  color: <span class="comment">#000;</span></span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright .post-url:hover &#123;</span><br><span class="line">  font-weight: normal;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright .copy-path &#123;</span><br><span class="line">  margin-left: 1em;</span><br><span class="line">  width: 1em;</span><br><span class="line">  +<span class="function"><span class="title">mobile</span></span>()&#123;display:none;&#125;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright .copy-path:hover &#123;</span><br><span class="line">  color: <span class="comment">#808080;</span></span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line">END_TEXT</span><br><span class="line"></span><br><span class="line">&gt; /tmp/a</span><br><span class="line">cat &gt;&gt; /tmp/a &lt;&lt; END_TEXT</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;% <span class="keyword">if</span> not is_index %&#125;</span><br><span class="line">        &#123;% include <span class="string">'my-copyright.swig'</span> %&#125; </span><br><span class="line">      &#123;% endif %&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">END_TEXT</span><br><span class="line"></span><br><span class="line">sed <span class="string">'/END POST BODY/&#123;n</span></span><br><span class="line"><span class="string">r /tmp/a</span></span><br><span class="line"><span class="string">&#125;'</span> themes/next/layout/_macro/post.swig</span><br><span class="line"></span><br><span class="line">cat &gt;&gt; themes/next/<span class="built_in">source</span>/css/_common/components/post/post.styl &lt;&lt; END_TEXT</span><br><span class="line">@import <span class="string">"my-post-copyright"</span></span><br><span class="line">END_TEXT</span><br><span class="line"></span><br><span class="line"><span class="comment"># Patch into org-octopress by git</span></span><br><span class="line"><span class="comment"># After patch should exec byte-compile-file in emacs and restart it</span></span><br><span class="line">cat org-octopress_add_copyright_patch</span><br><span class="line">diff --git a/elpa/org-octopress-20170821.415/ox-jekyll.el b/elpa/org-octopress-20170821.415/ox-jekyll.el</span><br><span class="line">index 66f6b728..ed2cf601 100644</span><br><span class="line">--- a/elpa/org-octopress-20170821.415/ox-jekyll.el</span><br><span class="line">+++ b/elpa/org-octopress-20170821.415/ox-jekyll.el</span><br><span class="line">@@ -87,6 +87,11 @@ description: Instructions on Upgrading Octopress</span><br><span class="line">   :group <span class="string">'org-export-jekyll</span></span><br><span class="line"><span class="string">   :type '</span>string)</span><br><span class="line"></span><br><span class="line">+(defcustom org-jekyll-copyright <span class="string">"true"</span></span><br><span class="line">+  <span class="string">"Default copyright status in Jekyll article."</span></span><br><span class="line">+  :group <span class="string">'org-export-jekyll</span></span><br><span class="line"><span class="string">+  :type '</span>string)</span><br><span class="line">+</span><br><span class="line"> (defcustom org-jekyll-comments <span class="string">""</span></span><br><span class="line">   <span class="string">"Default comments (disqus) flag in Jekyll article."</span></span><br><span class="line">   :group <span class="string">'org-export-jekyll</span></span><br><span class="line"><span class="string">@@ -125,6 +130,7 @@ makes:</span></span><br><span class="line"><span class="string">     (:jekyll-categories "JEKYLL_CATEGORIES" nil org-jekyll-categories)</span></span><br><span class="line"><span class="string">     (:jekyll-tags "JEKYLL_TAGS" nil org-jekyll-tags)</span></span><br><span class="line"><span class="string">     (:jekyll-published "JEKYLL_PUBLISHED" nil org-jekyll-published)</span></span><br><span class="line"><span class="string">+    (:jekyll-copyright "JEKYLL_COPYRIGHT" nil org-jekyll-copyright)</span></span><br><span class="line"><span class="string">     (:jekyll-comments "JEKYLL_COMMENTS" nil org-jekyll-comments)))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@@ -193,6 +199,8 @@ holding export options."</span></span><br><span class="line"><span class="string">          (org-jekyll--get-option info :jekyll-tags org-jekyll-tags))</span></span><br><span class="line"><span class="string">         (published</span></span><br><span class="line"><span class="string">          (org-jekyll--get-option info :jekyll-published org-jekyll-published))</span></span><br><span class="line"><span class="string">+        (copyright</span></span><br><span class="line"><span class="string">+         (org-jekyll--get-option info :jekyll-copyright org-jekyll-copyright))</span></span><br><span class="line"><span class="string">         (comments</span></span><br><span class="line"><span class="string">          (org-jekyll--get-option info :jekyll-comments))</span></span><br><span class="line"><span class="string">         (convert-to-yaml-list</span></span><br><span class="line"><span class="string">@@ -208,6 +216,7 @@ holding export options."</span></span><br><span class="line"><span class="string">      "\ncategories: " (funcall convert-to-yaml-list  categories)</span></span><br><span class="line"><span class="string">      "\ntags: "       (funcall convert-to-yaml-list tags)</span></span><br><span class="line"><span class="string">      "\npublished: "  published</span></span><br><span class="line"><span class="string">+     "\ncopyright: "  copyright</span></span><br><span class="line"><span class="string">      "\ncomments: "   comments</span></span><br><span class="line"><span class="string">      "\n---\n")))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@@ -310,22 +319,24 @@ Return output file name."</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> ;;;###autoload</span></span><br><span class="line"><span class="string"> (defun org-jekyll-insert-export-options-template</span></span><br><span class="line"><span class="string">-  (&amp;optional title date setupfile categories tags published layout)</span></span><br><span class="line"><span class="string">+  (&amp;optional title date setupfile copyright categories tags published layout)</span></span><br><span class="line"><span class="string">   "Insert a settings template for Jekyll exporter."</span></span><br><span class="line"><span class="string">   (interactive)</span></span><br><span class="line"><span class="string">   (let ((layout     (or layout org-jekyll-layout))</span></span><br><span class="line"><span class="string">         (published  (or published org-jekyll-published))</span></span><br><span class="line"><span class="string">+        (copyright  (or copyright org-jekyll-copyright))</span></span><br><span class="line"><span class="string">         (tags       (or tags org-jekyll-tags))</span></span><br><span class="line"><span class="string">         (categories (or categories org-jekyll-categories)))</span></span><br><span class="line"><span class="string">     (save-excursion</span></span><br><span class="line"><span class="string">       (insert (format (concat</span></span><br><span class="line"><span class="string">-                       "#+TITLE: "             title</span></span><br><span class="line"><span class="string">+                       "#+TITLE: "               title</span></span><br><span class="line"><span class="string">                        "\n#+DATE: "              date</span></span><br><span class="line"><span class="string">                        "\n#+SETUPFILE: "         setupfile</span></span><br><span class="line"><span class="string">                        "\n#+JEKYLL_LAYOUT: "     layout</span></span><br><span class="line"><span class="string">                        "\n#+JEKYLL_CATEGORIES: " categories</span></span><br><span class="line"><span class="string">                        "\n#+JEKYLL_TAGS: "       tags</span></span><br><span class="line"><span class="string">                        "\n#+JEKYLL_PUBLISHED: "  published</span></span><br><span class="line"><span class="string">+                       "\n#+JEKYLL_COPYRIGHT: "  copyright</span></span><br><span class="line"><span class="string">                        "\n\n* \n\n&#123;&#123;&#123;more&#125;&#125;&#125;"))))))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> ;;; provide</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure></div></div><div id="outline-container-orgffb9bfa" class="outline-2"><h2 id="orgffb9bfa">显示加载进度条</h2><div class="outline-text-2" id="text-orgffb9bfa"><p>由于GitHub加载速度并不快，有必要显示进度条以免误以为博客挂了。虽然主题默认支持进度条，但是仍需自己将pace源代码clone上来。一开始还以为只需要开启配置项就好，直到看了pace的README。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-pace themes/next/<span class="built_in">source</span>/lib/pace</span><br><span class="line">sed <span class="string">'s/pace: false/pace: true/g'</span> themes/next/_config.yml</span><br></pre></td></tr></table></figure></div></div>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;outline-container-org70be2be&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;org70be2be&quot;&gt;前言&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-org70be2be&quot;&gt;
&lt;p&gt;
之前匆匆上线，只是简单配置了一下Next进行渲染，总感觉少了点什么。
问了一下谷歌，发现&lt;a href=&quot;https://www.jianshu.com/p/9f0e90cc32c2&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo-NexT配置超炫网页效果&lt;/a&gt;一文收集了不少有趣的效果。
于是选择了一些效果使用Shell脚本应用到本博客，在此记录一下修改，以免之后又忘光。
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
本文所有SHELL脚本代码均在博客根目录执行，Hexo版本3.7.0，Next版本6.6.0
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;outline-container-org4da5a23&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;org4da5a23&quot;&gt;修改代码显示效果&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-org4da5a23&quot;&gt;
&lt;p&gt;
主题默认自带tomorrow代码块风格，配置文件中highlight_theme默认值为normal，
在主题配置文件中开启copy_button功能，在博客配置文件中开启auto_detect功能。
然而既不显示行号，也没有copy_button，猜测是org-octopress缘故，看了一下源代码，
最终在emacs文件中添加(setq org-jekyll-use-src-plugin t)，搞定。
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;outline-container-org5e9be97&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;org5e9be97&quot;&gt;添加GitHub挂件&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-org5e9be97&quot;&gt;
&lt;p&gt;
挂件代码corner_code可从&lt;a href=&quot;https://blog.github.com/2008-12-19-github-ribbons/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub Ribbons&lt;/a&gt;或者&lt;a href=&quot;http://tholman.com/github-corners/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub Corners&lt;/a&gt;获取
&lt;/p&gt;

&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Replace the your-url as your git hub repo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;corner_code=&lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;a href=&quot;https://your-url&quot; class=&quot;github-corner&quot; aria-label=&quot;View source on GitHub&quot;&amp;gt;&amp;lt;svg width=&quot;80&quot; height=&quot;80&quot; viewBox=&quot;0 0 250 250&quot; style=&quot;fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;&quot; aria-hidden=&quot;true&quot;&amp;gt;&amp;lt;path d=&quot;M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z&quot;&amp;gt;&amp;lt;/path&amp;gt;&amp;lt;path d=&quot;M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2&quot; fill=&quot;currentColor&quot; style=&quot;transform-origin: 130px 106px;&quot; class=&quot;octo-arm&quot;&amp;gt;&amp;lt;/path&amp;gt;&amp;lt;path d=&quot;M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z&quot; fill=&quot;currentColor&quot; class=&quot;octo-body&quot;&amp;gt;&amp;lt;/path&amp;gt;&amp;lt;/svg&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;style&amp;gt;.github-corner:hover .octo-arm&amp;#123;animation:octocat-wave 560ms ease-in-out&amp;#125;@keyframes octocat-wave&amp;#123;0%,100%&amp;#123;transform:rotate(0)&amp;#125;20%,60%&amp;#123;transform:rotate(-25deg)&amp;#125;40%,80%&amp;#123;transform:rotate(10deg)&amp;#125;&amp;#125;@media (max-width:500px)&amp;#123;.github-corner:hover .octo-arm&amp;#123;animation:none&amp;#125;.github-corner .octo-arm&amp;#123;animation:octocat-wave 560ms ease-in-out&amp;#125;&amp;#125;&amp;lt;/style&amp;gt;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &lt;span class=&quot;string&quot;&gt;&quot;/headband/a&lt;span class=&quot;variable&quot;&gt;$corner_code&lt;/span&gt;&quot;&lt;/span&gt; -i themes/next/layout/_layout.swig &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;outline-container-org393d99f&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;org393d99f&quot;&gt;修改链接显示颜色&lt;/h2&gt;
&lt;div class=&quot;outline-text-2&quot; id=&quot;text-org393d99f&quot;&gt;
&lt;p&gt;
由于默认链接颜色与非链接颜色一致，视觉效果上不容易区分，有必要对其进行修改
&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat &amp;gt;&amp;gt; themes/next/&lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt;/css/_common/components/post/post.styl &amp;lt;&amp;lt; END_TEXT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// Link style&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.post-body p a&amp;#123;// Color without mouse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  color: &lt;span class=&quot;comment&quot;&gt;#0593d3; // Link color&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  border-bottom: none;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  border-bottom: 1px solid &lt;span class=&quot;comment&quot;&gt;#0593d3; // Underline color&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;amp;:hover &amp;#123; // Color with mouse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    color: &lt;span class=&quot;comment&quot;&gt;#fc6423;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    border-bottom: none;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    border-bottom: 1px solid &lt;span class=&quot;comment&quot;&gt;#fc6423;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;END_TEXT&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;
    
    </summary>
    
      <category term="前端" scheme="http://ontheroad.nosace.cc/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Hexo" scheme="http://ontheroad.nosace.cc/tags/Hexo/"/>
    
      <category term="Next" scheme="http://ontheroad.nosace.cc/tags/Next/"/>
    
  </entry>
  
  <entry>
    <title>万事开头难</title>
    <link href="http://ontheroad.nosace.cc//org/2018-12-14-2018-12-14-%E4%B8%87%E4%BA%8B%E5%BC%80%E5%A4%B4%E9%9A%BE.html"/>
    <id>http://ontheroad.nosace.cc//org/2018-12-14-2018-12-14-万事开头难.html</id>
    <published>2018-12-13T16:00:00.000Z</published>
    <updated>2019-01-20T09:39:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>生活在信息大爆炸的时代，既是大幸又是不幸。</p><p>人类从未如此容易获取信息。还记得读初中的时候，不仅家里没书就连学校的书都很少，一周只允许学生借阅一本。在那个对知识如饥似渴的年代，每次提前还书后不得不把当页借阅记录撕了再借，毕业的时候大家都归还的是一本光凸凸的借阅证。而且当年学校藏书之少，使人对于一本枯燥的推导相对论的书都能手不释卷。信息匮乏是我们这代农村嗜书娃年少时的最大遗憾。</p><p><a id="more"></a></p><p>很幸运见证了信息爆炸的今天，然而这个世界永远不是一面的，信息爆炸的另一面是</p><ol class="org-ol"><li>丰富多彩的信息必然鱼目混珠</li><li>有价值的信息容易被噪点湮没</li><li>信息的筛选消耗越来越多时间</li><li>信息太多让人来不及好好思考</li><li>未经深入思考无法内化成知识</li></ol><p>所以总感觉只长见识不长知识。信息爆炸是我们这些互联网人扔给世界的双刃剑。</p><p>望着笔记本的内容繁复且杂乱，许多都是从网上复制粘贴所得，估计很难有再回味一遍的勇气。需要的时候又经常找不到所要，只能一次又一次地依赖谷老师。博客虽然过时但不失为好产品，写的时候可以总结和整理思路。最近在学习Emacs，对于其org-mode爱不释手。工具这种东西，没有捷径，唯有熟方能生巧。写博客的过程刚好可以多实践org-mode，一举两得。</p><p>作为一名半调子全栈工程师，涉猎过SSH,Drupal,Vue,Django,Ruby On Rails等WEB框架。这些框架用于做记录用的博客有些大材小用。折腾过WordPress,Jekyll等动态静态博客解决方案，对于本人而言静态解决方案有如下好处</p><ol class="org-ol"><li>不用数据库，易维护</li><li>不用解析器，速度快</li><li>天然免疫常见WEB攻击，安全性较高</li><li>最最最重要的是不用租用VPS，可以省下好多钱。。。</li></ol><p>相对于以前用过的Jekyll，个人更偏好没折腾过的Hexo。一则对于新鲜事物总是充满好奇，二来现在刚好有在使用Node.JS做项目。</p><p>万事开头难，不知不觉已经码了不少字，应该算是开了个好头吧。做好一件事很简单，坚持做好一件事很难很难，希望这件事不会半途而废。</p><p>遥祝大洋彼岸好友生日快乐，明年今日再来检阅此地成果！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;
生活在信息大爆炸的时代，既是大幸又是不幸。
&lt;/p&gt;

&lt;p&gt;
人类从未如此容易获取信息。
还记得读初中的时候，
不仅家里没书就连学校的书都很少，
一周只允许学生借阅一本。
在那个对知识如饥似渴的年代，
每次提前还书后不得不把当页借阅记录撕了再借，
毕业的时候大家都归还的是一本光凸凸的借阅证。
而且当年学校藏书之少，
使人对于一本枯燥的推导相对论的书都能手不释卷。
信息匮乏是我们这代农村嗜书娃年少时的最大遗憾。
&lt;/p&gt;

&lt;p&gt;
    
    </summary>
    
      <category term="随笔" scheme="http://ontheroad.nosace.cc/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="随笔" scheme="http://ontheroad.nosace.cc/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
</feed>
